apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"