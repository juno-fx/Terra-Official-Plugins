apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"