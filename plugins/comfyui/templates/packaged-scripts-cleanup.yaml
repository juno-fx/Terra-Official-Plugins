apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"