apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"