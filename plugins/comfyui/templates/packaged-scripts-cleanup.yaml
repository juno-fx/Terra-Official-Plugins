apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"