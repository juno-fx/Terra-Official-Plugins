apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"