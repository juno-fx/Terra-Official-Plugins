apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"