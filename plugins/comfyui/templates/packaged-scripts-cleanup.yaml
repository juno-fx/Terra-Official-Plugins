apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"