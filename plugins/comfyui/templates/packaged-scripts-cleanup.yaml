apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"