apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"