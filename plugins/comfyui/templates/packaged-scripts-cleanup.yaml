apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"