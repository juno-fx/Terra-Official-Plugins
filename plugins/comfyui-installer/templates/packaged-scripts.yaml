apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1YbW/bNhDuZ/2Ka1KgHxZJcZo4Q4sNKNp+CNBlxdrsyzKktERbXCSSIyk7Xtf/vuOLbFlWUndtVxTTBYhlmffCe47PnaQzxaTR6b0vKIcop6cn7hOl+9m6Pn40OsLr0egIP+DkSwbVSK0NUQD3lBDmrnUf+v0bFR3wp9yopRSMm0QXn9mHRXY8Pr4N/9HocNzB/9Hp+OQeHH7mOHrlf47//v10wng6IbqIIk0NxDSiWSFg7zXmxTA+g3VpgK+WJEn2omgfsoJm12AKYvAfhecvXr85O3/65uznc9SZMyV4hbowJ4qRSUmBaUAPEZvCbxD/BXsPWhp78PsTa4VHAN7/Lua4MNZkAi9umI0V40J1vIZRNGXrGNGljfDs/PWbpy9f3hWdiwFqmRNDnY5eakOrEDTHoN8FK+/bIQMkKeNYSmVJFZ6gzub6gnn28sXT84tXO6TKeg2r2z73QdFKzH2Yz6nGBBDDBIecKZoZoZarXD4rKeEWy1q61XnfagcrgKogVtPuBjYsoZVMVLKkhuaJ3dzXruJB/q00/N8u3s/t4wP8Pz46Puny/8n4cOD//0L2YVKzMm9ojkgTyM9dhqqAeAkzZhyF5WDE7RwSVdd4DbHs8gfqde5YY6Xgnr4UlUIza8HSI/J3LqjmD40lc438fra66e8c2ECwIwl7m/C8YWzWcCa6Q4qaLmu23Vme2R8uztZRAykVJfnS29YJXFhrtp94SkRfwRh+wUSArDEpQrEZ41ARzJyKaKlpiyWFo9vG03p7waI14ndfGCP14zTFO0U9SdBP6nwRLviyErVOg5HE6sRxTqUpYNQKqBWdbzMS3RHlEyuXpkCAWk0mkkyugK3nVqH5FhYHgENJ7FtE2tClwVsql1dBM828avwoGR0lo1FcMl7fxDffj6/Gx/GM1x46264DfK7NNn4b1O473D7V1zbgZ17TIvLKbzHoBjTqebP1VcFPsQlCzGDtt9HZRHrT3qqQGjr17dHVOv4QRgqEwtSk3Oj8PVXfzkkyx8U9lWyN2m31mAx78wsvdGvzUyWqx58MqZsb/ZqQQxsjuEi3COCTHWwk/deeBHaOsEu7FrXKqA/JWSOZYXNLbhbx1jGIYy7ijOB8ZmFX9M8aqcGa1Ym5Me0jEvaBp57P8NTbs4cdRFRXXCAhRpE72IJP2cyRRKIojtYUpsTGvzUC+pMd/0Q4QWstQvK7OGiVxQHoa4w488yyxXJx5W3cynY9Tjops/VyF4utLHwcm5UmV8imJO2a6URuAVtT2eruNt0y/pHwodUkSftQzHHjik1qnGNvBef5es3HAOTH6HmfmajUEJck6s9y218n0+s8x/FEEZ4VMB8lo+SwL+9KTKgyc7FMeyzbZoKPe7mluIc6XTCei8VlUorMNfTLxGc7/LC6nxSKTtPZw75g0wWdpDNZS8Jpmfyh1+b/xgOhca5QJfwAb22oGOmDd4XQ5v3jB+8WQl3j3CmFMu9Tidwkzdsnmzq4qBOIjw/XixKfmXRjbq2/Y5Dr2sC6EAuHvKiNrC24FZ7pEj/bR/zAjRuM44pVOTDsbdg0C4IPYwvFkOYlVRXTGiPVt4xEK0asNZ7aDy3CRixxiCowIoh/gdPT0zut7bBwZ4s+Gzst9fnaaWk7pTspuIy7qRGnEmkfZEmbyhCT0GEJ2JcZ4VWFfzuxYPbMryZXMtGirC1KBEcp4Y472u0daEGWtXZaa85oO1U1b/WXMEVYjkrkEk9piaWHg85h4v58ta2oAXWvglV86gp00Hohswc/9q9BM5e9WbrcQ51blHaOEm9Qbt9CxJlQOi6wR9i+sm0Xc1aR6/CaxKeb3tCsNlY5YPrdzZbW5hAeKNmn3WZUU9N5vxB97YekQQYZZJBBBhlkkEEGGWSQQQYZZJBvWP4B1qiCbQAoAAA="