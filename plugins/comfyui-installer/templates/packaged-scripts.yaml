apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1YbW/bNhDuZ/2Ka1KgHxZJcZo4Q4sNKNp+CNBlxdrsyzKktERbXCSSIyk7Xtf/vuOLbFlWUndtVxTTBYhlmffCe47PnaQzxaTR6b0vKIcop6cn7hOl+9m6Pn40OsLr0egIP+DkSwbVSK0NUQD3lBDmrnUf+v0bFR3wp9yopRSMm0QXn9mHRXY8Pr4N/9HocNzB/9Hp+OQeHH7mOHrlf47//v10wng6IbqIIk0NxDSiWSFg7zXmxTA+g3VpgK+WJEn2omgfsoJm12AKYvAfhecvXr85O3/65uznc9SZMyV4hbowJ4qRSUmBaUAPEZvCbxD/BXsPWhp78PsTa4VHAN7/Lua4MNZkAi9umI0V40J1vIZRNGXrGNGljfDs/PWbpy9f3hWdiwFqmRNDnY5eakOrEDTHoN8FK+/bIQMkKeNYSmVJFZ6gzub6gnn28sXT84tXO6TKeg2r2z73QdFKzH2Yz6nGBBDDBIecKZoZoZarXD4rKeEWy1q61XnfagcrgKogVtPuBjYsoZVMVLKkhuaJ3dzXruJB/q00/N8u3s/t4wP8Pz46Puny/8n4cOD//0IC5SM5TWpW5g3dEWkCCbrLUB0QL2HGjKOyHIy4nUui6hqvIZZdHkG9zh1rrBTc05iiUmhmLViaRB7PBdX8obGkrpHnz1Y3/Z0DGwh2JmFvE543zM0a7kR3SFXTZc22O8wz+8PF2TpqIKWiJF962zqBC2vN9hVPjegrGMMvmAiQNSZFKDZjHCqCmVMRLTVtsaVwtNt4Wm8vWLRG/O4LY6R+nKZ4p6gnCfpJnS/CBV9WotZpMJJYnTjOqTQFjFoBtaLz7UaiO6J8YuXSFAhQq9lEkskVsPXcKjTfwuIAcCiJfYtIG7o0eEvl8ipopplXjR8lo6NkNIpLxuub+Ob78dX4OJ7x2kNn23aAz7Xbxm+D2n2H26f62gb8zGtaRF75LQbdgEY9b7a+KvgpNkOIGaz9NjqbSG/aWxVSQ6u+Tbpaxx/CaIFQmJqUGxNAT9W3c5LMcXFPJVujdls9JsPe/MIL3dr8VInq8SdD6uZHvybk0MYILtItAvhkBxtJ/7UngZ0j7NKuRa0y6kNy1khm2NySm0W8dQzimIs4IzinWdgV/bNGarBmdWJuTPuIhH3gqeczPPX27GEnEdUVF0iIUeQOtuBTNnMkkSiKIzaFKbHxb42C/mTHPxFO0FqLkPwuDlplcQD6GiPOPLNssVxceRu3sl2Pk07KbL3cxWIrCx/HZqXJFbIpSbtmOpFbwNZUtrq7TbeMfyR8aDVJ0j4Uc9y4YpMa59lbwXm+XvMxAPlxet5nJio1xCWJ+rPc9tfJ9DrPcTxRhGcFzEfJKDnsy7sSE6rMXCzTHsu2meBjX24p7qFOF4znYnGZlCJzDf0y8dkOP6zuJ4Wi03T2sC/YdEEnqUUn+UOvTf+Nh0HjTKFK+AHe2jAxygfvCqHN+8cP3i2EusbZUwpl3qcSeUmat082dXBRJwgfG64XJT436cbcWn+HANc1gfUgFg5xURtZW1ArPMslfraP9oEbMxjHFasyYNjTsFkWBB/GFoohvUuqKqY1RqlvGYVWTFhrPK0fWoQNWOLwVGBEEP8Cp6end1rbYeHOFn02dlrq87XT0nZKd1JwGXfTIk4j0j7IkjaFISahsxKwLzPCqwr/dmLB7FlfTaxkokVZW5QIjlDCHXO02zvIgixr7bTWXNF2qmre6ithenDFJZd4OkssOxxwDhP356ttRQmoexWs4lNXoIHWC5k9+LF/DZq57M3S5R7q3KK0c5R4g3L7FiLOhNJxgb3B9pNtu5izilyH1yQ+3fSGZrWxygHT7262tDaH70DFPu02o/hE0nm/EH3th6RBBhlkkEEGGWSQQQYZZJBBBhlkkG9Y/gEFE/JhACgAAA=="