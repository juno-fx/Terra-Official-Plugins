apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1XbW/bNhDOZ/+Ka1KgHxZJcZuXocUGFE0+BMiyYm32ZRlSWqItLhLJkZRf1vW/7/giWbbl1EFbDMN0AWJbunvueM/dkdSpYtLoZO8byhHK2cmJ+0RZ/9z8Phw+Pzreg5NvGVQtlTZEAewpIcxDep97/x8VHfin3KiFFIybWOdf2Ycl9fT4eBv/ZyfD52v8vzg7PdqDo68cR6f8z/k/eJKMGE9GROeDgaYGIjqgaS5g/x3mxTA+gWVpgK+WOI73B4MDSHOa3oPJicF/FM4v3r2/vH79/vLna7SZMiV4ibYwJYqRUUGBaUAPAzaG3yD6C/aftiz24fdXFoUPALz/XeC4MBYyhos5s7FiXGiO32E4GLNljOjSRnh5/e7966urh6JzMUAlM2Kos9ELbWgZguYYdABpB3wAo4oVWa0LQKQJGOEH41hmRQHRAibMDJxNmoERzkdGNUZPDBMcMqZoaoRaoE55j78gkmupwjdou/bMQxaC+7AVlUIzi2MXjwnJBNX8mbHZ0Ziwy+ahf3JoIZFiYR8TntUpwGAB/OLRZSrK8aJi7bXXdL2xr24ul/EDKRQl2cLj6xhuLKIlKXY0uUUEQPcTEwOywiQJxSaMQ0kwm8oSWmja9oSLtHVZe1wutUG2UD4XuTFSv0wSfJJXoxj9Jc4n4YIvSlHpJMDE1iaKMipNDsOVwFbitGVlUy3RLVE+2XJhcqSuVVaoIplsaK+m3qj+HQwC/U3ZHNhMt2lNgt9ELu6CbZJ64+hFPHweD4dRwXg1j+bfn96dHkcTXnlSbWcEYl1F156XfD5xjH6pt65SuPS2lqO3fqHBuuGnmtYpaBpjDBGWOoOl79pqswJWUZtCC3Y0c15qolJ8GXoZ6TEVKVb6v6M7VjMUT1G9s+ItsF1kB2yzUq96o1vJGCtRvvximt3Y9jpNTm2k4OLdGBpfwcUaCb92JHOt5QMNAFpUKqU+NIdKUsOmfjzaWmi1ShRxEaUE57YtCEX/rHCgWHAdm7lZbaOwJpwUfOImhe1U3NBFeccFDlWr7UaB4GM2ccMlVhT3OgpjYlfjC6S9RYRpEP1EOEHM1jjzazpsFcwh6HuMPPXzqGNORqVHeWBedjhaS6KvpIdnYIPy2FlYmEzhVCbJOtDaCmoil6Ow9WZzcDP+aGIddhwn3QxnmArFRpWh2QOknS+1HkecKjGm8bQLaLAt5W1nG2l/MOlKjKgyU7FIOrDsPmQ7BlFxGj7TyYzxTMxu40Kk7oRwG/s0hxfN8zhXdJxMnnUFmMzoKJnIShJOi/gP3XbwN3aHxuOKKuAH+GDDxWiffsyFNp9ePv04E+qeqlgKZT4lEkeXNB9erdqg0looPkLUFwUer3QNt7TfOcx2UWBBiJkjXFRGVpbTEtu8wM921x+68wvjqNFUAcMtEXfbnEwpzBTD/UBSVTKtMVq99aTVDM1KYxN/Xg13celOZznGBdEvcHZ29hnEHVQfgerzsqOyz92Oyu0E72jiGAgHUzzgSDxSAmnPOWQpbM4E7AUkXC/8jWLGbPs3R2Qy0qKoLG8Ez2fC9b1D7jw7gywq7eyWA6TtVlW8tRmFo4gdW7Fc4KAqsCTxzHQUu7+6CltzAu3vAjJel5sR0bpM7cOP27QQ7LYzY7f7aLXVbOd48QHl9koTpULpKMfNxG5Bm8gufyW5Dxcdn3w6p2llrHnD8nfzDsvVU3+Y154Gm2G8SiHdaCILatyJrOM+9ubq4vX1zdsdbov24hW0Vy9euIWIqV/A+ZZbVD2+KXHzG8PaeucK09vTvHnraiFtLu7fvsn30ksvvfTSSy+99NJLL7300ksvvfTSSy+9rMo/4Vk5lAAoAAA="