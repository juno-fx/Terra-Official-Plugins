apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1XW0/kNhTmOb/i7LDqRSUJAWaotioSAh5GonS1QF9KhTyJh7FI7NR2Bqbd/vcex87gGTIDrNhuq+YgkYxzbj6X79gqlazUKt74jLSNtL/fr59Iy0/vfW832cH3JNnBB/Q/p1MNVUoTCbAhhdDr+J76/h8l5fJPuZazUjCuIzV5ZRsms4PB3qr8J0kyWMr/7v5gsAHbr+xHK/3P87/5Jh4xHo+ImgSBohpCGtB0IqB3jnHRjN/AQ2mArZYoinpBsAnphKa3oCdE4z8KxyfnF8Ozw4vhz2coM2VS8AJlYUokI6OcAlOAFgI2hl8h/AN6bz2JHvz2g9HCAwBr/znquNBGZQQn98z4in6hOL5DEozZg49o0ng4PDu/ODw9Xedd7QNUZUY0rWXUTGlaOKc5Ov2n0/KX7zJAFDOOpZTnVGIHLW2uzZmj05PDs8v3zwiVseq4fZubIGkhptbNY6owAEQzwSFjkqZayNk8lkc5Jdzksipr7qyNu04rgCwglOPFDcSpKMazivUWNaI2/FDmVNMsMpv80tXc0UupwX+/eF/bxhP439/dSZbxv9/f6fD/nyAH+QhOo4rlWQN3pNQOBOtXVx0QzuCG6SBwEHh9PPzw4wqgQLTLQIvVcBMUt/gOYbmMlSi3tGIhx9PSLLWxeb7N2RbW0LNccAubkpZCMeOOgWWcG5mgin+tzRBROFeG80W7smV2hZNQmGXCs2ZSsAar0fcmBI8m2pH5cDl8CAGQXFKSzaxuFcGl0WbmmIVitOWU4Q8MPJQVJkFIdsM4FAQzJQOaK+qhsqhhvrH0sD2n0Sixu59oXap3cYwrk2oUoR2bO8IFnxWiUrFTEhmZMMxoqSeQeA553tnxVqI5Im1gy5meYLa94RaUrJwXUjU1As0vx+yqxZXgpsmIn7m4nF07iTi1IuFulOxESRLmjFf34f33g+vBXnjDK5syczxwaavHemOvydabOl+fauNxgodW0mTgvd2Sk3XRr6bNVucNNcZhCyGDB7uNzGJmF/XNC6eBbTt+6zMGfnBHFwy9rki+cMJoqXI/FtEUmVsq1yg122pR6fZmGS+Vt/mxFMW7T05hfS61PC52xjeoPbSo8RqKF4L8S0vAllq0DrMSlUypdaXWRlLNpgYsTYa9Mg9DLsKU4LnPpFnS3ytsfaNWRfpe+y3gOgm7mt9gV5vewskkimsuEPeCoG5cwcfspgaBSFI8slMYE+P/o6Ol7dzwJ8IJavMAx+5iyyuDLVC36HFqkeMRioWF1bESzVqMLIXM1Mc6lJpreBla5TqTiJYkXlaz5LlJ2ANUzVcfwynjL0wfao2i2EQfmcVdHXpR6bIyES4wbzk+/TRu1SODceSYh4shTiHwTQge5O8kw9YtqSyYUjjmlD8j/WqvFGZk1UcEzxKn6AQ9gPAD7Pf7rdJrGJ7UYHe5lsXufy2LH5q1jHXE6isnTobSXGKIX24YU4d6BMxF1l1T7c30jpnumh9FyEiJvDJRJjjORN0vqLf1hAJlXqlaqunORaOy4h4GOGQ3dRSVM6ydHKsfh852VP/Zagns7WpqZK+dVjxxu3OKdxnvwUE7D6q5WojOVQ95VzA/2ztcoNzcPMNUSBVOsH+xk67efoMqC7PXcAoIihkjoSoYHMQZncbctM/OwVcJfPxoWzsM07L6ts0fjHFBbt2V2qaH3tO00saoy/1394+kFg9Ori9tmoxXeHpduoMGX/pA3VFHHXXUUUcdddRRRx111FFHHXXUUUf/IvobhtxyxAAoAAA="