apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WS2/bRhD2mb9iQhfooSFpNVYEtEABI/FBgOEUtd1LUwQrcm0uTO5u9yFb/fWdfUiiJDrVIUHRdj8Dkpac5zezM9a1YtLo6uQr4gwxm079N2L/+/D3ZPL92fkJTL9mUGtYbYgCOFFCmM/J/d37fyl0rD/lRq2kYNyUuv3CPlxR356fv1T/88n0zV7938ymb0/g7AvHMYr/ef1PX1ULxqsF0W2WaWqgoBmtWwH5DfJiGH+AbWtA6JayLPMsO4W6pfUjmJYY/KDw/vLmdn59cTv/cI06S6YE71EXlkQxsugoMA3oIWP38BsUf0L+zUAjh99/dFZ4BhD8H2OOC+NMlnD5zFysGBeq42+YZPdsGyO6dBHOr29uL66uPhedjwGsbIihXkevtKF9DJpj0NHIMOBTWFjWNWtZACJNtBEPjGObdR0UK3hgJvM6dQNGeB8N1Rg9MUxwaJiitRFqhTL9I56gkHtU4RvUPXgmnxr87DQUHYkeOsFDFopKoZkz67hAfhpBNf/WOLI08jffPAxPXjsPWHHhHhPerBnB2AECFxhBLfr7lWVDKtbVe+de3c236QDpFCXNKtjXJdw5i65mpa+azyka9EfkCaRFzoRiD4xDT5Bc5erbaTr0hEm6Nl173Ka6sexMBS5aY6T+oarwSWsXJfqrvE/CBV/1wuoqmimdTlE0VJoWJjuB7cTpusxRLdEtUYFsuTItVnLQZa46TG66wC5jfZCR2GYoaizpdlpzpFJr9l95/sslio+y7ww7UkbMblixS3D64K0c8vrrSER7NcwDAQBaWFXTYMnPE1Ibtgztj26GuRcFF0VN8F5CobBYf1jsEGdcl+bZ7DUwVlxi6wEZ9hF2YySOgJtbcSqFQfTE0Mf2ZpGFFp1FUUmwjsKPAW959MqB7Kz2erHAe26V5YMcY5l7wngpV5hYh6Tg8Dgr/V+4pWW5GWiDUZvDT87Yp+gGV+5GCnU+7lztKgp9zFHrRbWjwxoz4hnB4ognn7ywRlqjX0MvGmwKnAW4JEX/ieMRT44JxlFiww7DsYGEt2RJ4UkxRzdVPdMa2dWOhxYtQfELzGYzGE2uij7z46RDYEcKD6M/UsWnlwdeevIYN0FoM/pMa2vcytjY+u55hNHdORjbPzScYxB3DTY2qsiOGtrgXRpZWO+uLi+u734+Yp26zRSldzcTXi6xDAm8f2HNrOcoJX6QYlgvLqU4PFSPl/f+cAUNLB0m90//q5OQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQ8J/HX0TQOrcAKAAA"