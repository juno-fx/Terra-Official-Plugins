apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WXW/bNhTNs37FnTNgD6tlZ01iYAMGBG0eDATpsCRP61DQEhMRkUiOpJxov36HFG3LjtP5ocWwjSdAbFL389wP2RZGaGcnR18RU2B2dhY+gd3Pl99PTn6Ynh7R2dcMaoXWOmaIjoxS7nNyf/f8Xwob68+lM51WQrrcVl/Yhy/q+enpa/V/ez493an/29nZ+RFNv3Ace/E/r//xN5OFkJMFs1WWWe5ozDNeVIpGN+DFCflAm9agvlvyPB9l2TEVFS8eyVXM4R+n95c3t/Pri9v5h2voLIVRsoEuLZkRbFFzEpbgIRP39BuN/6TRtwONEf3+k7ciM6Le/yHmpHLeZE6Xz8LHirigju90kt2LTYxw6SOcX9/cXlxdfS66EAO1umSOBx3bWcebGLRE0NHIMOBjWrSiLleyREy7aCMehESb1TWNO3oQLgs6RUlOBR8lt4ieOaEklcLwwinTQaZ5xInGeocqPIHuzl1vslayD9twrazwdnzyIKRU3MrvnGfHgrD5+rK/eeNNosTKXzNZrihAsER98nBZqOa+a8Uw91W53vlHd/NN/MRqw1nZ9fZtTnfeoi9SHsoUkogGwxHEkG5BkjLiQUhqmAjdUFs+9IMUfVeu/G0SXdv1hnomKue0/XEywU3VLnJ4mwSPTCrZNaq1k2gm9zrjccm1q+hkK6ytKH1TeaI13DLTU607V6Fwg6aCiBZ6XfR2iYt2SUuI4JtVrSk45f4Yho8VTiz7XoHUUHNskN8fLSj1Zm3unmPvoM80SkRsyDeqVoByVI2RH+g4rv2EPgnY27QcW1hVtxDVDBmrMB/B8t5eJF23NuhFKnbcmlYO8omE+PrlugOtNRoAUzXNw1/fvnm+nvTBDhrRz97Yp+gG76K1FHQ+bvX8JAp9HEHrVbWDw9pnJDCCQqinkLxqnW6dfUONKtGWmBm8PVTzSeKIk2dCSEis2REYLxBesSWnJyM83dw0wlqwaz0PFSzR+FeazWa0N7lJ9Dk6TLoP7EDhYfQHqoT04rJp2GNckX2b8WdetM7v0rWt75/3MLq9L2Kr9w3nGcQSRmNDRdfc8RIzvWeTv7u6vLi+++WA94xf2VF6e2VjptSyT+D9K/t3tXE4CysHYb26rePyMQ1m9v7lvh5YepncP/0bICEhISEhISEhISEhISEhISEhISEhISEhISEh4b+BvwBTzktxACgAAA=="