apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1X60/jRhDnc/6KuVCpH4ptcryqq1QJHXxA4uipQL/0KrSxN/EKe9fdR0j613f2YcdJTAgnTlV1HiQSr+f9m5mdqFSySqtk7xvSIdLZyYn7RFr/3Pw+Gr0/PN6Dk2/pVE1GaSIB9qQQehvfS+//p6QC/pRruagE4zpW+RvbsKCeHh8/h//pydHxGv5HZ6dHe3D4xn500neO//67ZMx4MiYqHwwU1RDRAU1zAcNbzItmfArL0gBfLXEcDweDfUhzmj6CzonGfxQuLm/vrm7O765+u0GZGZOClygLMyIZGRcUmAK0MGAT+BOif2D4Q0tiCH/9YrXwAYC3v4s6LrRVGcPlnFlf0S8Ux+8wGkzY0kc0aT28urm9O7++3uad8wFMlRFNnYxaKE3L4DRHp4OStsP7MDasyGpeAFLpoCM8MI5lVhQQLWDK9MDJpBlo4WxkVKH3RDPBIWOSplrIBfKUj/gEUbWWKnyDsmtnXmUhuHdb0kooZvXY4DEhmaCK/6htdhQm7Ko59CcHViVCLOwx4VmdAnQWwAePJlNRThaGtWOv4fpoX91fLf0HUkhKsoXXr2K4txotSLGDyQURFLpHTAxUBpMkJJsyDiXBbEoLaKFo2xIGaeuytrgMtdFsVflc5FpX6kOS4EluxjHaS5xNwgVflMKoJKiJrUwUZbTSOYxWHFvx05aVTXWFZon0ya4WOkfoWmWFLBWrGtjNzAvVz0EgwN+UjZnVb5p6mUCEFcDw/KE+O4pH7+PRKCCOOQ6Visa1IcVKdXdgX+P5ziEaz5C9E0+r2Ka5Q22TZ896ryzfZ+/5RIryA7RrMwnJS5YxJKmPMwqxRAXjZh7Nfz59OD2Opty4oeR5vCVMjfUUnL8bLfEGJtaK7I+OZK4V9NBXA4ASRqbUu+a0klSzmW9+C2mrEKKIiyglOJUsrpL+bbBdrHIV67leLZIQE/YBn7o+sHWI15UoH7jAkWG5XaELPmFT1zqxpDjJKUyIjcYXSHsAhlqPPhFOUGerWX1MB62COQD1iJ6nvts6pkBUei1bpkGHobUk+kra3uGNltd2eqEziTOHJOuK1iKogVw2euvN5lhi/NXAOt1xnHQjnGEqJBsbTbMtoF0sub4SuA5N28DrNvg1ALY1vRZEKcZU6plYJB3a7NRuoddkGLMrnlz2hNGVsQkqsWcK/Gy30IG76hhHjiZChlciDuaczCg8SYbDtaKyZErh7ayevZSbCWQUdsTLbDjwK3eR5+gXRL/D2dnZCxp3YH2FVp+XHZl97nZkbid4RxGHQNhh8C6scPsA0q45RCncdATsrho2Ub98PjHbS802RcZKFMbiRvAqF66JnObONQuqwignt+zGtllpeGuyh+vZzoC4WmDXF1iLuDAexu6vrsJmiW2t10P41Sp7CGbwZ1bDhTJfOhPzZYhSz4rt7BYeUG6X3CgVUkU59q8d25uaXZpK8hhWX59jOqep0Va8AfOneYfk6h4YZpzPtk0kLteIKopUBbWdO+za0D9eX57f3H/e4feDXcUD9+oqjmNXzHwAF8/s1fWQosRNKXTr2S08zChZ4lifbO7hLU2bwf3Xv+166qmnnnrqqaeeeuqpp5566qmnnnrqqaeeevp+6V9avXmxACgAAA=="