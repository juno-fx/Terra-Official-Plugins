apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WXW/bNhTNs3/FrVK0QFdJcZrEwAoMCNoMMBBkw5L0ZR0CWqIjIhKpkZQS99fv8kOy7MidH1oMxXgCxBbF+3Xu4aVVJlmtVXrwHXGEmJ2e2k/E9ufz79Pp8dHJAZx+z6Q6NEoTCXAghdBf2/dv739QKN9/yrVc1YJxnajiG8cwTT07OdnV/5Oz49Ot/r+bnR0fwNE3zmMU//P+H75IF4ynC6KKyURRDTGd0KwQEF0jL5rxe1hLA5xakiSJJpNDyAqaPYAuiMZ/FD5eXN/Mr85v5r9doU3LpOAV2kJLJCOLkgJTgBEmbAl/QvwFopcDiwj+em+88AmAi7+POy60cZnAxRMzuWJeaI7fYTpZsnWOGNJkOL+6vjm/vPxadjYHaOqcaGpt1EppWvmkOSbtnQwTPoRFw8q82wtAau19+AfGUWZlCfEK7pmeWJssBy1sjJwqzJ5oJjjkTNJMC7nCPdUDPkFcb1GFb9B2a825LAV3aUtaC8WMH1M8EpILqvhrbdhRSNi8X3Qrb41LbLEwy4TnHQWYLIArHkNmolquGjasvWvXB/Pqdr7OH0gpKclXzr9K4NZ4NE1KbJtsEd6hfURioG6QJCHZPeNQEWRTmoaWig4jYZFGl13Edam9Z+PKcVFoXauf0xRXimaRYLzUxiRc8FUlGpV6N4mxieOc1rqA6UZiG3kaWRmqawxLpCO7XukCWzeQFW6pWd23vWmdUffsDXz7e9k0bfem18sSYlQAw/W7bu1dMj12Elgv4rOscOuyhTc20q8Me2i11ffDHlQz7bSCR6QD2+mixZHtuKScVKbjJq/IvTJ0LoUEow3otr95j8KxzDhVvMxREPDqFVSte/BF4MoCJfCAW3Pshcs5SVKvVXzlzxjSphtSbpzLEdV2SnxhoyYtbh9VonFsBDLitlcIUm3swXp5dsRS3+90zXDqirLTcs3NljQ/jRSydQwipyEAJRqZUZeA9UoyzVo3MowQBvKJYy7ijOAsM2qQ9O8Gm2qcq0Q/+WmCEqrx0AIZnkDsqqeZgBnxfoA7KTwydL0eQmShRNng1pqgNoSdmNbz6HSCumyUtfNUbYWVDR+U5gVREcaTeoX1lMgFztmjxP51yuhn/+BWiuAX4+zOh8FfJ/0utPk82rbPEVrtNNs7rTEnlhHsiXi0xYtG141Wb6ESOWoBpyj+nhDVHcdHfDJMMI47enYYDlwkvCAthUfJDN1UVkwpZFcZHgr0BPEfMJvNdmjSxYz22+zy2nPzMPk9TWx1/vapyIO/M53K6BPNGm0u197XT08jhG5eIF70Tm+GQLyVUddoUpdU0xxP0MjV/uHy4vzq9vc9fniYO9zv3rzD8UiJ1hXwcceF3F1AlNgbCNPaeX37SeOm8vMLfODpeXH/9Y/CgICAgICAgICAgICAgICAgICAgICAgICAgB8W/wARQaCNACgAAA=="