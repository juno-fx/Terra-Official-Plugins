apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1X32/bNhDOs/+KqzNgD4ukuE3soQMGBE0eDKRZsSR7WYeAlmiLiERqJOXY++t3/CFZtmXHaVMM23QBYlvifXe87+54VLFkhVbR0TeUU5TR+bn9RNn83P4+GLw9PTuC82/pVCWl0kQCHEkh9L51z73/l4ry/FOu5bIQjOtQpa9sw5A6PDvbxf9oMBpu8P9uNBwewekr+9Eq/3P+j99EE8ajCVFpr6eohoD2aJwK6N9iXDTjM1ilBrhsCcOw3+sdQ5zS+BF0SjT+o3B5dXs3vrm4G/9ygzpzJgXPURfmRDIyySgwBWihx6bwOwR/Qf+7hkYf/vjJoPAegLN/CBwX2kCGcLVgxlf0C9XxOwx6U7byEU0aD8c3t3cX19f7vLM+QFkkRFOro5ZK09w7zdFpD9J0+BgmJcuSai0AKbTH8D8YxzTLMgiWMGO6Z3XiBLSwNhKq0HuimeCQMEljLeQS1+SP+AuCYiNU+AZ1N545yExw57akhVDM4JjNY0ASQRX/XpvoKAzYuH7onpwYSKRYmMeEJ1UI0FkAt3k0GYt8uixZc+8VXR/Mq/vxyn8gmaQkWTp8FcK9QTQkhZYmuwkPaH9iYKAoMUhCshnjkBOMpjSEZoo2LeEmTV5WFldbrZENlItFqnWh3kcRPknLSYj2ImuTcMGXuShV5GFCoxMECS10CoM1x9b8NGllQl2gWSJdsIulTpG6RlrhkoIVNe3l3ClVv72Cp79Om2MT6SatkbcbFcsHrxvFTjl4Fw7ehoNBkDFeLoLFj8OH4Vkw46Uj1VSGJ9ZmdGV5xecby+jXWmtLhbHTNRx9chv12jU/5bwKQV0YUwgw1RmsbFda2xmwjlonmtejibVSERXjS1/LSI8uSbZW/y3VsR6hcI7LWzPeAJtNtsDWO3VL71UjGFMp8vdfTbNt225NHVPjKVh/t5rGK5jYIOG3lmBulLynAUCJUsbUuWZRSazZ3LVHkwuNUgkCLoKYYN82CSHpnyU2FAOuQr3Q62Xk94Sdgs9spzCVige6yB+4wKZqVttWIPiUzWxzCSXFs47ClJjduARpHhG+GwQfCSeI2Whnbk8njYQ5AfWInseuH7X0ySB3KHv6ZYuhjSC6TNrfA2uUl/bCTCcSuzKJNoE2dlARuWqFjTfbjZvxFxNrscMwamc4wVBINik1TfaQdrla9YXEtSDtI6/d4JcQ2ER6KYlSTKjUc7GMWtDMudZgr44wRlc82eiJUhelCVCONZPhZ7OETuwwwDiuqHfI8HzBoyslcwpPkmFzLajMmVI4v6idY0vdgUqFFfH8MjwSCzvqpOgXBL/CaDR6BvGApS9AdXE5cLGL3YGLmwE+UMUy4Kc8nBYKnM+ANHMOWfInHQEzzftZ3Y3nT8zUUj1vkokSWWl4IzjsCFtEFrl1EIUiK5XVW1Vj06wseaOz+3Pd9ICwWGLVZ5iLOICchvavysJ6zG9cQPrwswF78GbwIlqvQp3PrYH53EetnWoHu4UPKDfXgCAWUgUp1q9p29vINkw5efSXAxdjuqBxqY16TeYPixbN9UnZ9zgXbRNIvH4gq6hSZFTbKablDvPh+uri5v7TATcsc1nxq9cvK9h2xdxt4HLHzaNqUpTYLoVu7byn+B4lc2zr0+2bSgNpe3P/9O23k0466aSTTjrppJNOOumkk0466aSTTjrp5L8rfwO7qnS1ACgAAA=="