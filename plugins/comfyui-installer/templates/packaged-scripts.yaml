apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WW2/bNhTOs3/FqTOgD4sku7kNHTAgaPMQIMuKJtnLOgS0RFtEJFLjxbH363d4kSxf0nhAimIYvwCRRZ3znSsPqXLJGq2yg2+IEeL89NQ9EZvP7d/j8bvRyQGcfkunWhiliQQ4kELor8m99P0/ChXqT7mWy0YwrlNVvrINW9Szk5Pn6n96PD7bqP/x+dnoAEav7MdO/M/rf/gmmzCeTYgqBwNFNSR0QPNSwPAW86IZn8GqNcB3S5qmw8HgEPKS5o+gS6LxH4WPl7d3VzcXd1e/3aDOnEnBa9SFOZGMTCoKTAFaGLAp/AHJ3zD8oacxhD9/tix8AODt70PHhbaUKVwumPUV/UJ1/A3jwZStfEST1sOrm9u7i+vrr3nnfADTFERTp6OWStM6OM3R6UDSd/gQJoZVRSsLQBodOMIL49hmVQXJEmZMD5xOXoAWzkZBFXpPNBMcCiZproVcokz9iG+QNBupwi+ou7HmKSvBvduSNkIxy2ODx4QUgir+VtvsKEzYVbfoV44sJZZY2GXCizYF6CyADx5N5qKeLg3rx96W64P9dH+18h9IJSkplp5fpXBvGW2RUlcmF0QgdK+YGGgMJklINmMcaoLZlLaglaJ9Sxik7cvW4irUjtlS+VyUWjfqfZbhSmkmKdrLnE3CBV/Wwqgs0KRWJ0kK2ugSxmuOrflp28qmukGzRPpkN0tdYul6bYUiDWu6spu5V2rfg0Iof9c2Zt5+6fplCgl2AMP1h3btOB2/S8fjUHHMcehUNK4Nqda6e0ft23q+cRVN5yi+s56W2KZ5B22XZy96r6zcJ+/5VIr6PfR7MwvJy1YxZLmPMwmxJBXjZpEsfjp7ODtJZty4oeRlvCVMjfUUnL9bW+IVTGw02e87krnR0EPfDQBKGJlT75pjJblmc7/5bUl7jZAkXCQ5walk6yrpXwa3iyVXqV6EuYDN0OD2A9LfS7gjQ6kJ2GEdRrGfvk8MqVfjhEyUqAyKNgR7WbjZ55h3zhloKqOcXkjihllpeC+00J81YTxtlhhPhbnAiTlK3Z8fTWnaTfHe+TKEXyzZQzCD94xOCnW+7CzolyFqPau2t1u7SNY2ZBt6TfjMzRy75/FqIOoHLjBtgxdmSqULidONtNMk+ZVwgkwtcVL795c6om8z29DNttqlTbYLBcnEk6ujMLoxWh1BjTQVPvusR66ojKNEV2iGpwD2TknmFJ4ks51DZc2UwkZRz55D3aYzisrhy2I44xp3dpXoFySf4fz8/AXGPUT/BavPy57CPnd7CvcTvKeKq0A4tmvyGC4bflPTBc2NtreSjuvHxY7+XT95Q0f57W2LjNcZHCOo0lRU0wIH1o470Yfry4ub+0973Njs5SdIr19+sCXF3Afw8ZmbTHtyU+KObnTr2XtPOFxkjfthun3z6TFtB/e9b9MRERERERERERERERERERERERERERERERHfH/8AMFwv+wAoAAA="