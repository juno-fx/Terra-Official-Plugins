apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1YW2/bNhTOs3/FaVIgD4ukuM1laLEBRdOHAGlWLM1eliGlJdriIpEcSdnxuv73HV4ky7aSOm2KYZtOgDiWzo3nO/zIE50qJo1Otr6h7KMcHx66T5TVz/W/h8Nn+wdbcPgtk6ql0oYogC0lhLlP73Pv/6WiA/6UGzWXgnET6/yRY1hQjw4O7sL/+Gj/aAX/58dHiP/+I+fRKf9z/HeeJCPGkxHR+WCgqYGIDmiaC9i+wLoYxiewaA3w3RLH8fZgsANpTtMbMDkx+IvCyZuL96fnr96f/nSONlOmBC/RFqZEMTIqKDANGGHAxvArRH/C9tOWxTb89tJ64QMAH38Td1wY6zKGN7fM5op5oTn+DcPBmC1yxJA2w9Pzi/evzs7uy87lAJXMiKHORs+1oWVImmPSwUk74R0YVazIal0AIk3wEb4wjm1WFBDNYcLMwNmkGRjhYmRUY/bEMMEhY4qmRqg56pQ3+A0iuVIqfIO2K8+8y0Jwn7aiUmhm/djFY0EyQTXfNbY6Ggt22jz0T/asS4RY2MeEZ3UJMFkAv3gMmYpyPK9Ye+01XK/tq8vTRf5ACkVJNvf+dQyX1qMFKXYwuUUEh+4rFgZkhUUSik0Yh5JgNZUFtNC0HQkXafuyjrhYauPZuvK1yI2R+kWS4JO8GsUYL3ExCRd8XopKJ8FNbG2iKKPS5DBcSmwpT9tWttQSwxLliy3nJkfoWm2FKpLJBvZq6o3q78EgwN+0zY6tdBvWJMRN5Pw62CapN46ex8Nn8XAYFYxXt9Ht90fXRwfRhFceVLszArCuo+vICzyfOES/NlpXK5x6W4vRO7/QYN3gU03rEjQbYwwRtjqDRezaar0Dlr02jRbsaOai1ECl+DLsZYTHVKRY2v8du2O5QvEU1Ts73jq2i+xw26zUq17qVjHGSpQvvhpmR9tep6mpzRRcvmuk8QghVkD4paOYK1s+wACgRaVS6lNzXklq2NTTo+2F1laJIi6ilCBv24ZQ9I8KCcU617G5NcvbKKwJmYJPHFPYnYoHuiivuUBStdqOCgQfs4kjl1hRPOsojIldjW+Q9hER2CB6SzhBny0682vaazXMHugbzDz1fNTBk1HpvdzDlx2BVoroO+l+Dmy8PJQLC5MpZGWSrDpaWUEN5IIKW2/WiZvxBwPrfMdx0o1whqVQbFQZmt0D2slC6wuB6/B0H3jdAb8EwLanh4KoxIgqMxXzpMObPdeabYjOkWJ3dTJjPBOzq7gQqbt2XMUeu/CieR7nio6TyW5XnsmMjpKJrCThtIh/1+0Af+GW03gHUgX8AB9szpjy04+50ObTi6cfZ0LdUBVLocynRCIfSvPh5bINKq2k4jNEfVHgnU3X7hb2G6fZ7jTsMjFzXSQqIyvbKCVyR4GfbSrZc5cixlGjQZrhOYtHeE6mFGaK4SEjqSqZ1pitvvP61jBxpZEZPq+GVwPprnw55gXRz3B8fPwZjxuoPsCrr8uGyr52Gyq3C7yhiUMg3Hbx1iTxngqkvfcQpXDiE7BTTZhZ/JgyY5ZTmns3GWlRVBY3gpc+4cjEee68kIMsKu3sFqzUDqsq3jrhwv3GcmEs58h+BbYkXsT2Y/dTd2Ez7rQGsW340Tq7DmFwIG+00OaqszBX22h1p9nGaeEDyu04FKVC6ShHHrPH17pnV6aS3IQhydeY3tK0Mta8AfO72w7L5YkhcL2vti0kjmGIKprIghp3m+uY5V6fvXl1fvlug0nTDm1Be3low+NHTP0CTu6YwGqypsSxNaZ157wWuFqVeLyN1ye2lqf1xf3T/wXopZdeeumll1566aWXXnrppZdeeumll17+i/I3Aw6uSgAoAAA="