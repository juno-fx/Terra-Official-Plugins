apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1XbU/rNhTmc37FueVqryShQEG605DQhQ+VGLu6wL6MCbmJ21okdmY7hW53/33HsdO6bVroxN3VtBwkkjrnzeflObZKJCu0inc+I+0jnfR61RNp+em9Hx12D/C92z3oHu9A73M6VVOpNJEAO1IIvYnvue//UVIu/5RrOS0E4zpS41e2YTJ7fHS0Lv/dLiZ7Mf+HJ8dHO7D/yn400v88/7tv4gHj8YCocRAoqiGkAU3GAjrXGBfN+AjmpQG2WqIo6gTBLiRjmjyAHhON/yicX1zf9K/Obvo/X6HMhEnBc5SFCZGMDDIKTAFaCNgQfoXwD+i89SQ68NsPRgsPAKz9l6jjQhuVEVw8MeMr+oXi+A7dYMjmPqJJ42H/6vrm7PJyk3eVD1AWKdG0klFTpWnunObo9J9Oy1++ywBRzDiWUpZRiR20tLkmZ95fXpxd3X54QaiMVcft29wFSXMxsW6eU4UBIJoJDimTNNFCTmexfJ9Rwk0uy6LiTpu4q7QCyBxCOVzcQJyIfDgtWWdRI2rDD0VGNU0js8kvXc0tbUs1/vvF+9o2nsH/HqL+Mv73egct/v8b5CAfwWlQsiyt4Y4U2oFg9eqqA8IpjJgOAgeB9+f9jz+uAQpEuxS0WA83Qf6A7xAWy1iJcksrFnI8LfVSE5vn24xtYQ09ywS3sClpIRQz7hhYxrmRCqr419oMEYVzpT9btCt7Zlc4CYVZJjytJwWrsRp9r0OwMtHemw+3/XkIgGSSknRqdasIbo02M8csFKMtpwx/YOChKDEJQrIR45ATzJQMaKaoh8qigvna0nx7TqNRYnc/1rpQ7+IYV8blIEI7NneECz7NRalipyQyMmGY0kKPoes55Hlnx1uB5oi0gS2meozZ9oZbULBiVkjlxAjUvxyzqxZXgrsmI37m4mJ67yTixIqEh1H3IOp2w4zx8ikc8dLmypwLXL6qeV4bqtP0pkrU1spXU9q3IibmH+wmnJCLdzmpNzdroSGOVwgZzA3WMsifT7Z16zvr2D/YzGLpLLo/q8x6Ltj5Xh1i8IM7G2FudUmyhSNMQxv5MY8myNzQGkapiWKDShdKy3irvFgPpcjfbV8jLjHGE6j8sSC0rZrq4Gw/LsXyl4a4LLV6FU0lSplQ60OljSSaTQzomrrx2iUMuQgTgudHUzyS/l4ihBi1KtJP2m8l15GIDnyE6GB6FCecyO+5QPwMggoABB+yUQUmkaR49KcwJMb/lSOqRYDwJ8IJavOAy+5iz8v2HqgH9DixCLSChmFudaxFxQYjSyEzZbAJ7WYatkO9TKcSUZfEy2qWPDcJm0PebHUVlhnfMn2oNYpiE31kFo9V6EWpi9JEOMe8Zfj007hXjR7GkWMWLoawhwA6JngheJQMO7SgMmdK4bhU/qz1y7xUmJF1HxGEC5zGY/QAwo9w0us1Sm9geFaD3eVGFrv/jSx+aDYyVhGrrq44YQpzGSJ+uWFMHbgRMBdid921N9xHZrprdqQhAyWy0kSZ4FgUVb+g3saTDhRZqSqpujsXjcqSexjg5oWpo6iYYu1kWP04w/aj6s9WS2BvaRMje++04sndnXe8S30HTpt5UM3dQnTuOsi7hvnF3uEC5eYGGyZCqnCM/YuddPf2G1SZm72GE0BQTBkJVc7gNE7pJOamfQ5Ov+rCp0+2tcMwKcpvm/zBGOfkwV3NbXroE01KbYy63H//tCK1eABzfWnTZLzCU/DSXTb40gfzllpqqaWWWmqppZZaaqmlllpqqaWWWnoF+htIASnhACgAAA=="