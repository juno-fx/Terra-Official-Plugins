apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WS2/bRhD2Wb9iIhfooSFpxbJVpEABI/HBgOEEtd1LUxgrcmUuTO6y+5Cl/vrOPkhRMpXq4KAosp8BS1zO85vZGalcskar7Ogb4gQxOztzn4jdz5ffJ5N3J9MjOPuWQbUwShMJcCSF0F+T+7f3/1OoUH/KtVw3gnGdqvKVfdiink+n++o/PTud7dT/dHaO9T955TgG8Z3X//hNNmc8mxNVjkaKakjoiOalgPEt8qIZf4RNa4DvljRNx6PRMeQlzZ9Al0TjPwofL2/vrm4u7q4+3aDOkknBa9SFJZGMzCsKTAF6GLEF/AHJ3zD+oacxhj9/sVb4CMD7P8QcF9qaTOFyxWysGBeq43eYjBZsEyO6tBFe3dzeXVxffy06FwOYpiCaOh21VprWIWiOQQcj/YCPYW5YVbSyAKTRwUZ4YBzbrKogWcMj0yOnkxeghfNRUIXRE80Eh4JJmmsh1yhTP+ETJM0OVfgGdXfOvMlKcB+2pI1QzNqxySMhhaCK/6gtOwoJu+oO/clbaxJLLOwx4UVLAQYL4JNHl7moF2vD+rm35fpgX91fbeIHUklKirW3r1K4txZtkVJXJpdEMOgekRhoDJIkJHtkHGqCbEpb0ErRvidM0vZl63GTamfZmvJclFo36n2W4Ulp5in6y5xPwgVf18KoLJhJrU6SFLTRJUy2AtuK07aVpbpBt0R6spu1LrF0vbZCkYY1XdnN0iu1z0EhlL9rG7Ns33T9soAEO4Dh+UN7dppO3qWTSag4chw6FZ1rQ6qt7h6ofVvPN66i6RLFB+tpDVuaB8x2PHvRe2XlPvvIF1LU76Hfm1kgL9vkkOU+zyTkklSMm1Wy+vn84XyaPHLjhpKX8Z6QGhspuHhfXIlXcLHTZL8PkLnT0GPfDQBKGJlTH5qzSnLNlv7y25L2GiFJuEhyglPJ1lXSvwxeF2tcpXoV5gI2Q4PXD0j/LuGNDKUmYId1GMV++j4zNL0ZJ2SuRGVQtCHYy8LNPmd5cM5AUxnl9AKJO26l4b3UQn/WhPG0WWM+FXKBE/MkdX9+NKVpN8V7+2UMv1pjD8EN/s7opFDny2BBv4xRa6/awWENGXGMYE3Es0teGN0Yrd5CLQrsBZyH+MtA1A8cH/HJMsE4SnTsMBydSHhJlhSeJbN0U1kzpZBdZXko0RIkv8FsNtvTrd7n+DBhH9eBwv3gD1Rx2YU9UpOnsP18l9EVzY22a7Kz9dNqgNDtVRCa3vebJRD3K/Y1qjQV1bTAGzSwpD9cX17c3H8+4CeE3cZBensb45USS5/Axz2rtV0llLhdgmHtXcRh2skar+zi5SruWXqZ3H/98y4iIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiLiO8M/a01CXQAoAAA="