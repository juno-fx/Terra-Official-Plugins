apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WXW/bNhTNs37FrTJgD6sku3NiYAMGBG0eDARZsSR7WYeClpiIiERy/HCi/fpdUrQt20rrhxbFNp4AtinxfvCcy3ujS8Wk0cXJV8QEMT8789+I/e/D39Ppm8nsBM6+ZlJrWG2IAjhRQphP7fvc+38pdNCfcqM6KRg3ua6/cAwn6vls9pL+s+n5bE//H+fnkxOYfOE8RvE/1//0VbFkvFgSXSeJpgYymtCyFpDeIC+G8QfYlgb01ZLneZokp1DWtHwEUxODHxTeXd7cLq4vbhe/XqPNiinBW7SFFVGMLBsKTANGSNg9/AHZ35B+N7BI4c+fnReeAPTxj3HHhXEuc7h8Zi5XzAvN8TdMk3u2zRFDugwX1ze3F1dXn8rO5wBWVsRQb6M7bWgbkuaYdHAyTPgUlpY11XovAJEm+AgLxrHMmgayDh6YSbxNWYERPkZFNWZPDBMcKqZoaYTqcE/7iCvI5B5V+AZtD57Jpwo/Gw1ZQ0KERvD+FIpKoZlz67hAfipBNf/eOLI08rfYPOyfvHYRUHHhHhNerRnB3AF6LjCDUrT3nWVDKtbqvXWv7hbb4wBpFCVV1/vXOdw5j06z3KvmzxQc+iXyBNIiZ0KxB8ahJUiucvo2mg4j4SFdma4jbo+68exc9VzUxkj9U1Hgk9ouc4xX+JiEC961wuoiuMmdTZZVVJoapjuJ7eTpqsxRLTEsUT3ZsjM1KjmoMqcOk5sqsKugDzISygy3GkuandIcUWorcJDhlRciX6HdqAwugmNnxP+GHrsCZw/eyyHBv4+ktidm2jMBoIVVJe09+cZCSsNW/T3AMEMSsoyLrCR4QSFTqNpfFkvFOde5eTZ7lYzSS6xBIMOCwrIMDBJwDSy0p74jPTGMsb1iZKlFY3GrJCio8P3Aex69eyAbq71dUHovrLJ8cMagd0sYz2WHB2uQFOwik9z/9dc1zzedbdBzU/jFOfsYwuDs3exCmw87d7wImz6kaPWi2dFpjTnxjKA44skfXlgjrdGvoRUVFgU2BZyWov3IcYkrxwTjuGPDDsP+gYTXZEXhSTFHN1Ut0xrZ1Y6HGj1B9hvM53MYPVwRYqbH7e4TO3LzMPsjTfzx0p6XljyGkdCXGX2mpTVudmx8/fA8wuhuQwzl3xecYxCHDhY2msiGGlrhXRqZXG+vLi+u794fMVfdiAq7d0cUXi6x6g/w7oV5s26olPiOimm9OJ1C81AtXt77w1k08HR4uG/9P09ERERERERERERERERERERERERERERERERExH8V/wAYFCvIACgAAA=="