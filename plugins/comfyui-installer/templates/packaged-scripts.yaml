apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1X227jNhDNs79i1inQh0ZSvOvYxRYoEGzyYCBNF03Sl24R0BJtEZFIlaQcu1/f4UWybMuOs8iiKKoJEFsU58JzZoZjFUtWaBWdfEM5RxlfXNhPlO3P3e+Dwfvz4QlcfMugKimVJhLgRAqhD+176f1/VJTnn3ItV4VgXIcqfWMfhtTRcLiP/9FwPNzi/8N4NDqB8zeOo1X+5/yfvoumjEdTotJeT1ENAe3ROBXQv0NcNONzWKcGuGwJw7Df651CnNL4CXRKNP6jcHV9dz+5vbyf/HqLOgsmBc9RFxZEMjLNKDAF6KHHZvAHBH9D/7uGRh/+/MlY4T0A5/8Yc1xoYzKE6yUzsWJcqI7fYdCbsXWM6NJEOLm9u7+8uTkUnY0ByiIhmlodtVKa5j5ojkF7I82AT2Fasiyp9gKQQnsb/oFxTLMsg2AFc6Z7VidOQAvrI6EKoyeaCQ4JkzTWQq5wT/6ETxAUW1DhG9TdWnMmM8Fd2JIWQjFjxxweAUkEVfx7bdBRCNikXnQrZ8YkUizMMuFJBQEGC+AOjy5jkc9WJWuevaLrk3n1MFnHDySTlCQrZ1+F8GAsGpJCS5M9hDdoHxEYKEoESUg2ZxxygmhKQ2imaNMTHtLkZeVxfdTasjHlsEi1LtTHKMKVtJyG6C+yPgkXfJWLUkXeTGh0giChhU5hsBHYRpwmrQzUBbol0oFdrHSK1DXSCrcUrKhpLxdOqXr2Cp7+Om3KRfWmzpcZBJgBDNcfq7UP4eB9OBh4xhFjn6noXJck28juFu4rPt9ZRsMFbm/l0xg2MLeYrXF2Wx+U2ffZRT6TIv8IzdyMPHjR+gxR7M4Z+LMEGePlMlj+OHocDYM5L21TcnucJ4TGRAo23p2SeAMXW0n2ewuYWwndd9kAoEQpY+pCs1ZJrNnCFb+htJEIQcBFEBPsSoZXSf8qsVyMcRXqpd5MEn8mrAM+t3Vg8hCvK5E/coEtwydAs8H5XA5+IZygTqMYXcxnjYQ4A/WEkcWumlqqPMidlQPV3uJoCySXKYcruLby2krOdCKxp5Bo29DWCSqi1oXceLPbdhh/NXHWdhhG7QwmCIVk01LT5ABpV+tdX0lci6VD5LU7/BoCm5ZeS6IUUyr1QqyiFmumKzfYqxFGdMWzRU+UuigNQDnWRIafzRI5s1cZ47ijPiHDKw8bb0oWFJ4lw+ZZUJkzpfD2VXsv3brDlAor4uVt2NALe1GnGBcEv8F4PH7B4hFbX2HV4XLkZofdkZubAB+pYhnwMwredQVOF0CaOYcs+ZuMgJlF/aTphstnZmqpnpbIVImsNLwRvKqFLSJruXWMgiIrldVbV2PTrSx5o3P769f0gLBYYdVnmIs4EJ6H9q/KwnpIbYzPffjZGHv0bvBnVL0Ldb60AvOlj1p71Y4OCxcoN0NsEAupghTr17TtXcsWppw8+dHWYUyXNC61Ua/J/GHZork55/ke59A2QOLwjKyiSpFRU7n9tgn808315e3D5yN+H5hR2+/eHLWx7YqFO8DVnrm5alKU2C6FYe2dsn2Pkjm29dnunN2wtHu4f/u3WyeddNJJJ5100kknnXTSSSeddNJJJ5100kknneyTfwDxXxcCACgAAA=="