apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1W32/bNhDOs/+KqzKgwFpJTufUwAYMCNo8GAiyoUn2shYBLdEREYnkSMqJ9tfv+MO2bMutH1p0w/gFiC2K993dd8ejdaGYNDo/+YYYI6bn5+4Tsfu5//3s7M14cgLn3zKoFVptiAI4UUKYz+370vv/KHSoP+VGdVIwbjJdfWUftqhvJ5ND9Z+8OZ/s1P+n6dvxCYy/chyD+J/X//RFPmc8nxNdjUaaGkjpiBaVgOQGdTGMP8CmNcB3S5ZlyWh0CkVFi0cwFTH4j8L7y5vb2fXF7ey3a7RZMiV4g7awJIqReU2BaUAPI7aAPyH9G5IfehYJfPrFsvARgPd/DB0XxlJmcPnMbKwYF5rjdzgbLdgmRnRpI5xd39xeXF19LjoXA7SyJIY6G91pQ5sQNMegA0k/4FOYt6wuV3sBiDSBIzwwjm1W15B28MDMyNkUJRjhfJRUY/TEMMGhZIoWRqgO9zSP+ASp3JEK36DtzpqnrAX3YSsqhWaWxyaPgpSCav7SWHU0CjZbL/qV15YSSyzsMuHlSgIMFsAnjy4L0Sy6lvVzX5XrnX11N9vED6RWlJSd59cZ3FlGW6TMlcklEQjdIwoDskWRhGIPjENDUE1lC1pr2veESdq+XHncpLpmtlRei8oYqX/Oc1yp2nmG/nLnk3DBu0a0Og80mbVJ05JKU8HZVmBbcdq2slJLdEuUF1t2psLS9doKt0gm12Vvl6E+qEjoK9xqWlJv9eJApdCsXa4crLtoASn2BcP1+7C2qtILV6dsibSDVbIBWPEG3K/VQ4fWHhzLXvvlQYt84zz/0Q0RH2WyX7E/BnLd6Y7ESwugRasK6n07VlIYtvQnySrRUzVNuUgLgkfcyqHoXy32niXXmXkOhwxbSGIvA+k3JrZ3qAQBO/nCXPOj7Ikh9eZskrkWdYtbJcHGEG6QOObBQwuybrWzCyrtuFUt76UWytoQxjPZYT41aoHjZ5y5P3/Os2w9EnvDOoFfLdl9cIOX9noX2nwcrNjHBK0Omh0d1hCJUwRrIp5c8qI1sjX6NTSixF7A4YLXrGjuOT7ik1WCcdyxVofhHELBK7Kk8KSYlZuqhmmN6mqrQ4VMkH6A6XR6oB29z+S4zT6uIzf3gz/SxGUXhnJDHsNV4ruMPtOiNfbOWXO9eh4QdHuuhqb3/WYFxMsK+xpNZE0NLfEEDdx4764uL67vfj/iPrZXW9i9fbXhkRJLn8D7A/fUai5T4gYzhnXwVgtDRjV4ZBf791qPaT+57/1bKSIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiLi345/APizpEAAKAAA"