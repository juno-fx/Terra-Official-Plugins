apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1X32/bNhDOs/+Ka1KgD4ukOG2SIcUGBE0fAmRZsTZ7WYaUlmiLi0RyJGXH6/q/7/hDsmzLiYO2GIbpAsS2xPvueN/xI6lTxaTRyc43tIODg8OToyP7aW31c/37cHh4cLwDR98yqdoqbYgC2FFCmIfGPfb+P2o68E+5UXMpGDexzr9yDEvq8atXm/g/OTp8ucL/y5Pjwx04+Mp5dNr/nP+9Z8mI8WREdD4YaGogogOa5gJ232NdDOMTWLQG+G6J43h3MNiDNKfpHZicGPxH4fzt+w8XV2cfLn6+Qp8pU4KX6AtTohgZFRSYBowwYGP4DaK/YPd5y2MXfn9tUfgAwMffBo4LYyFjeHvPbK6YF7rjdxgOxmyRI4a0GV5cvf9wdnn5UHYuB6hkRgx1PnquDS1D0hyTDiDthPdgVLEiq8cCEGkCRvjBOLZZUUA0hwkzA+eTZmCEi5FRjdkTwwSHjCmaGqHmOKa8w18QyZVS4Rv0XXnmIQvBfdqKSqGZxbGTx4Jkgmr+wtjqaCzYRfPQP9m3kEixsI8Jz+oSYLIAfvIYMhXleF6x9txrut7YV9cXi/yBFIqSbO7xdQzXFtGSFDua3CQCoPuJhQFZYZGEYhPGoSRYTWUJLTRtR8JJ2r6sIy6m2iBbKF+L3BipT5MEn+TVKMZ4iYtJuODzUlQ6CTCx9YmijEqTw3ApsaU8bVvZUksMS5QvtpybHKlrtRUOkUw2tFdT71T/Dg6B/qZt9myl27QmIW4i57fBN0m9c/QyHh7Gw2FUMF7dR/ffH98ev4omvPKk2pURiHUdXUde8PnMMfql0bpa4cL7Wo7e+YkG74afalqXoFkYY4iw1RksYtde6x2wjNo0WvCjmYtSE5Xiy7CWkR5TkWJp/XesjuUKxVMc3tnxFthOsgO2makfeq1bxRgrUZ5+Mc1Otv2YpqY2U3D5ronGVwixQsKvHcVcWfKBBgAtKpVSn5pDJalhUy+PthdaSyWKuIhSgrptG0LRPysUFAuuY3NvlpdRmBMqBZ84pbArFTd0Ud5ygaJqRzspEHzMJk5cYkVxr6MwJnY2vkHaW0RQg+gnwglituTMz2m/1TD7oO8w89TrUYdORqVHeUAvOwKtFNF30sMa2KA8VQsLkylUZZKsAq3MoCZyIYWtN+vCzfiTiXXYcZx0M5xhKRQbVYZmD5B2vhj1NOJUiTmNp11A+LbQEBVksKn27ahr9X+w+kqMqDJTMU86sOyGZJcOoqIsvtDJjPFMzG7iQqTuqHAT+3qHF83zOFd0nExedCWYzOgomchKEk6L+A/dDvA3LhON5xZVwA/w0aaL2T7/lAttPp8+/zQT6o6qWAplPicSNUyaj6+XfXDQSio+QxwvCjxn6Rpu4b91mu3uwM4QM8e8qIysLLklrvcCP9vLf98dZBjHEU07MNwbcdvNyZTCTDHcGCRVJdMas9Ubj1yNelYaV/Pjw3A7l+6YlmNeEP0CJycnjyBuMfQJqL4uWw72tdtycLvAW7o4BsIJFU86Es+WQNqChyyFXZqAvYmEe4a/WsyY1YHmrExGWhSV5Y3gQU04AXDInYdokEWlnd9CSdphVcVbu1I4k1j9iuUcFavAlsTD00Hs/uoubAkG+t8GZLw3NxLRulXtwo+bRiHYTWfFbnbRa6Pb1vniA8rt3SZKhdJRjruK3YvWkV39SnIXbjy++PSeppWx7g3L3913eC4f/4NwexpshfFOhXSjiyyocUezjovZm8u3Z1fX77a4NtobWBi9fAPDvURM/QTON1ynavmmxOk3prXx8hXU29O8fv1qIa1P7t++0vfWW2+99dZbb7311ltvvfXWW2+99dZbb705+wcWerUXACgAAA=="