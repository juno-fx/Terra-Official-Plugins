apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1XbU/rNhTmc37FueVqryShQEG605DQhQ+VGLu6wL6MCbmJ21okdmY7hW53/33HsdO6bVroxN3VtBwkkjrnzeflObZKJCu0inc+I+0jnfR61RNp+em9Hx12D/C92z3oHu9A73M6VVOpNJEAO1IIvYnvue//UVIu/5RrOS0E4zpS41e2YTJ7fHS0Lv/dLiZ7Mf+HJ8dHO7D/yn400v88/7tv4gHj8YCocRAoqiGkAU3GAjrXGBfN+AjmpQG2WqIo6gTBLiRjmjyAHhON/yicX1zf9K/Obvo/X6HMhEnBc5SFCZGMDDIKTAFaCNgQfoXwD+i89SQ68NsPRgsPAKz9l6jjQhuVEVw8MeMr+oXi+A7dYMjmPqJJ42H/6vrm7PJyk3eVD1AWKdG0klFTpWnunObo9J9Oy1++ywBRzDiWUpZRiR20tLkmZ95fXpxd3X54QaiMVcft29wFSXMxsW6eU4UBIJoJDimTNNFCTmexfJ9Rwk0uy6LiTpu4q7QCyBxCOVzcQJyIfDgtWWdRI2rDD0VGNU0js8kvXc0tbUs1/vvF+9o2nsH/3tHByTL+93onLf7/G+QgH8FpULIsreGOFNqBYPXqqgPCKYyYDgIHgffn/Y8/rgEKRLsUtFgPN0H+gO8QFstYiXJLKxZyPC31UhOb59uMbWENPcsEt7ApaSEUM+4YWMa5kQqq+NfaDBGFc6U/W7Qre2ZXOAmFWSY8rScFq7Eafa9DsDLR3psPt/15CIBkkpJ0anWrCG6NNjPHLBSjLacMf2DgoSgxCUKyEeOQE8yUDGimqIfKooL52tJ8e06jUWJ3P9a6UO/iGFfG5SBCOzZ3hAs+zUWpYqckMjJhmNJCj6HrOeR5Z8dbgeaItIEtpnqM2faGW1CwYlZI5cQI1L8cs6sWV4K7JiN+5uJieu8k4sSKhIdR9yDqdsOM8fIpHPHS5sqcC1y+qnleG6rT9KZK1NbKV1PatyIm5h/sJpyQi3c5qTc3a6EhjlcIGcwN1jLIn0+23PJ31ab/wVYWC2fR+Vld1lPBTvfqCIMf3MkIM6tLki0cYBqayI94NEHmhsYwSk0MG1S6QFrGW+VFeihF/m77CnFpMZ5A5Y+FoG3VVMdm+3Eplr80xGWp0atoKlHKhFofKm0k0WxiINdUjdcsYchFmBA8PZrSkfT3EgHEqFWRftJ+I7l+RGzgI8QG06E430R+zwWiZxBU7S/4kI0qKIkkxYM/hSEx/q8cUG3/hz8RTlCbB1t2F3tetvdAPaDHicWfFSwMc6tjLSY2GFkKmSmDTVg307Ad5mU6lYi5JF5Ws+S5Sdgc8Garq6DM+JbpQ61RFJvoI7N4rEIvSl2UJsI55i3Dp5/GvWrwMI4cs3AxBD2EzzHB68CjZNihBZU5UwqHpfInrV/mpcKMrPuIEFzgLB6jBxB+hJNer1F6A8OzGuwuN7LY/W9k8UOzkbGKWHVxxflSmKsQ8csNY+rAjYC5DrvLrr3fPjLTXbMDDRkokZUmygSHoqj6BfU2nnOgyEpVSdXduWhUltzDADctTB1FxRRrJ8Pqxwm2H1V/tloCe0ebGNl7pxXP7e60413pO3DazINq7haic9dB3jXML/YOFyg399cwEVKFY+xf7KS7t9+gytzsNZwAgmLKSKhyBqdxSicxN+1zcPpVFz59sq0dhklRftvkD8Y4Jw/uYm7TQ59oUmpj1OX++6cVqcXjl+tLmybjFZ6Bl26ywZc+lrfUUksttdRSSy211FJLLbXUUksttdTSq9DfE9EWogAoAAA="