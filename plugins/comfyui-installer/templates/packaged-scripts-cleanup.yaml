apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1XW0/jRhTm2b/ibFipD4ttDCRUW7USAh4isXS1wL50KzRxJvEIe8adGYekVf97z1ycOFdgxXZV1QcJO+Nzm3P5zoxKJSu1ive+IR0inZ527RNp9dl4PzlOjvA9SY7wAd1v6VRNldJEAuxJIfQuvqe+/0dJ+fxTruWsFIzrSGWvbMNkttc72Zb/JEl6K/k/Pu319uDwlf3YSP/z/O+/iQeMxwOisiBQVENIA5pmAjo3GBfN+BgWpQGuWqIo6gTBPqQZTR9AZ0TjPwoXlze3/euz2/6v1ygzYVLwAmVhQiQjg5wCU4AWAjaC3yD8EzpvGxId+P0no4UHAM7+c9RxoY3KCC6nzPiKfqE4vkMSjNjCRzRpPOxf39yeXV3t8s76AFU5JJpaGTVTmhbeaY5O/+W1/N10GSCKGcdSynMqsYNWNrfJmfOry7Pru4/PCJWx6rmbNvdB0kJMnJsXVGEAiGaCw5BJmmohZ/NYnueUcJPLqrTcw03cNq0AsoBQjpY3EKeiGM0q1lnWiNrwQ5lTTYeR2eT3ruaWXko1/jeL97VtPIH/3SQ5WcX/bveoxf9/gzzkIzgNKpYPa7gjpfYgaF99dUA4gzHTQeAh8P6i/+nnLUCBaDcELbbDTVA84DuE5SpWotzKilGWC+6QTtJSKGY0GCRFqB8KqvgP2uC+wlHQny+6lQPjCA4vYZYJH9bgzmp4RXO112tD6Nx8uOsvvAaSS0qGM6dbRXBntJnR49ATbXll+ANjBWWFcROSjRmHgmBwZUBzRRtAKiwy15YW2/MajRK3+0zrUr2PY1zJqkGEdly4CRd8VohKxV5JZGTCcEhLnUHScKjhnZtIJZoj0gW2nOkME9SYR0HJynnuq4kRqH95Zp9gXzX7JiNvG8URl7N7LxGnTiQ8jpKjKEnCnPFqGk5/7N33TsIxr1zKzET3abOTuLZXZ+uNzdfX2lhPcN9Jmgx8dFvysj761aTe6rwHRjgfIWSwsFvLLGd2Wd+8cGqkdRPT1jZ+8KcNDL2uSL50KNhQ5c1YRBNk3lC5RqnZ1gaVfm+O8U41Nj+Sonj/1Sm0R0nH42NnfAProWv011C8FOTPGwK20qI2zEpUMqXOFauNpJpNDL6ZDDfKPAy5CFOCRzWTZkn/qLD1jVoV6alutoDvJOxqPsauNr2Fw0QU91wg4AWBbVzBR2xsQSCSFE/ZFEbE+L92GnSdG34gnKC2BuC4XRw0yuAA1AN6nDrkWEOxsHA6tqLZBiMrITP1sQul5hpehla5HkpESxKvqlnx3CRsAVXz1XU4ZfyF6UOtURSb6COzeLShF5UuKxPhAvOW47OZxgM7MhhHjnm4GOIUAl9G8Oz9KBm2bkllwZTC+aaaY61Z7ZXCjGz7iOBZ4uDL0AMIP8Fpt7tRegfDkxrcLneyuP3vZGmGZiejjZid3DgZSnPvIM1yw5h61CNg7p7+Zukuk4/MdNf89EAGSuSViTLBcSZsv6DejYcKKPNKWam6O5eNyoo3MMAju6mjqJxh7eRY/Th0DiP756olcBeiiZG991rxkOxvyY37cwd+2cyDar4sRedLB3m3MD/bO1yg3FwWw1RIFWbYv6bn1/VirAry4G+zLsx0StNKG2Gfw3fTNanlA5DvLxduE0k8OK5c/4LvfZZtqaWWWmqppZZaaqmlllpqqaWWWmqppZaW6R/83XEWACgAAA=="