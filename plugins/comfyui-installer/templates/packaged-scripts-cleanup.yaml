apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1X227jNhDNs79i1imQh0ZSvLm42AIFgk0eAmTTRZP0pSkCWqItNhKpkpQv/foOL5JlW3Gc3SwWRTUBYluaOTOcMzMkVSxZoVW09w3lCGV4emo/UdY/N78PBu+PTvbg9FsGVUmpNJEAe1IIvU3vpff/UVGef8q1XBSCcR2q9I19GFLPTk6e4394fDxc4/94eHa6B0dvHEer/M/5338XjRiPRkSlvZ6iGgLao3EqoH+LedGMT2BZGuCqJQzDfq+3D3FK4yfQKdH4j8LF5e3d1c353dWvN2gzZVLwHG1hSiQjo4wCU4AeemwMf0DwD/R/aFj04c+fDQrvATj/u8BxoQ1kCJdzZmLFuNAcv8OgN2bLGNGlifDq5vbu/Pp6W3Q2BiiLhGhqbdRCaZr7oDkG7UGaAe/DqGRZUukCkEJ7DP+DcSyzLINgAROme9YmTkAL6yOhCqMnmgkOCZM01kIuUCd/wl8QFGupwjdou/bMQWaCu7AlLYRiBscsHhOSCKr4gTbZUZiwq/qhe3JoIJFiYR4TnlQpwGAB3OLRZSzy8aJkzbVXdH00r+6vlvEDySQlycLhqxDuDaIhKbQ02UV4QPsTEwNFiUkSkk0Yh5xgNqUhNFO06QkXaeqy8rhcao1soFwuUq0L9SGK8ElajkL0F1mfhAu+yEWpIg8TGpsgSGihUxisBLYSpykrk+oC3RLpkl0sdIrUNcoKVQpW1LSXU2dU/fYGnv66bPZNppu0Rt5vVCwevW0UO+PgOBy8DweDIGO8nAfzn84ez06CCS8dqaYzPLG2oivPSz7fWUa/1ltbKVw5W8PRZ7dQb13zU06rFNSNMYYAS53B0ndltVkBq6h1oXk7mlgvFVExvvS9jPTokmQr/d/SHasZCqeo3lrxBtgssgW2XqlTvVeNZIylyD98Nc12bDudOqcmUrDxbgyNN3CxRsLvLclca3lPA4ASpYypC82iklizqRuPphYarRIEXAQxwbltCkLSv0scKAZchXquV9vIrwknBZ/YSWE6FTd0kT9ygUPVaNtRIPiYTexwCSXFvY7CmJjVuAJpbhF+GgSfCCeI2Rhnbk2HjYI5BPWEkcduHrXMySB3KFvmZYujtSS6Sto+A2uU187CTCcSpzKJ1oHWVlARuRyFjTebg5vxVxNrscMwamc4wVRINio1TbaQdrHU+kLiWpC2kdfu8EsIbCK9lkQpRlTqqVhELWhmX6vbEMFxxB6oaMZ4ImYPYSZie+x4CB13/kX9PEwlHUeTg7Y4oxkdRZOiLAinWfiXWqMQ6RMzS48odVEaBnJsygw/mz16aE8bjKNGnUKGGxjujSmZUphJhtO7oDJnSmFE6tlzUT3iSoUt97Ia7rmFPUulGBcEv8FwOHwBcQfVV6C6vOyo7HK3o3IzwTuaWAb8MRKPIwUeAIE0ixpZ8lspAXNd8JcBd/6fMdOs9YGWjJTISsMbwdOUsF1qkVtPulBkpbJ2y3ZvupUlb2wd/uBghkxYLHCsZFiSeMI5Cu1fVYX1PaJxw+nDLwbs0bvBm26thTYPrYl56KPVs2Y7h4UPKDf3jCAWUgUpDgizL2wi2zTl5MnfPlyO6ZzGpTbmNZk/zlssV4/ifoi6bJtE4v0GWUWTIqPaHpNaLkkfry/Pb+4/73CFM7chr716G8K5LqZuARfPXG2qKUiJHYMY1rMXIT8EZY77xnjzKtRA2lzc975ed9JJJ5100kknnXTSSSeddNJJJ5100kknnXw3+RejSBh5ACgAAA=="