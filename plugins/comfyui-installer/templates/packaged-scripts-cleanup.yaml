apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1WXW/bNhTNs37FnTNgD6ukZE1iYAUKBG0eDATpsCRP61DQEhMRkUiOpJxov36HlGzLjtP6oUVRjCeAbVL389wPxRZGaGfzg2+II2B6ehq+ge3v57+Pj387Ojmg028Z1BKtdcwQHRil3OfkvvT8B4Ud6s+lM51WQrrMVl/Zhy/q2cnJS/V/fXYy3ar/6+nZ6QEdfeU4duJ/Xv/Dn/K5kPmc2SpJLHeU8oQXlaLJNXhxQt7TujWo75YsyyZJckhFxYsHchVz+OD0/uL6ZnZ1fjP7cAWdhTBKNtClBTOCzWtOwhI8JOKO/qL0X5r8PNKY0N9vvBWZEPX+9zEnlfMmM7p4Ej5WxAV1/Kbj5E6sY4RLH+Hs6vrm/PLyc9GFGKjVJXM86NjOOt4MQUsEPRgZB3xI81bU5VKWiGk32BgOQqLN6prSju6FS4JOUZJTwUfJLaJnTihJpTC8cMp0kGkecKJUb1GFJ9B9dqcfS3zWltKaDR5qJfssDNfKCm/WcwF+SsWt/MV5siz4m60u+5tX3gMqrvw1k+WSEcRO1HOBCArV3HWtGFOxrN47/+h2tk6HWG04K7vevs3o1lv0NctC1UJOg8FwBE+kW3CmjLgXkhomQnPUlo/9IEXfpEt/60RXdr2hnonKOW1/z3PcVO08g7c8eGRSya5Rrc0HM5nXSdOSa1fR8UZYG1H6HvNEa7hlpqdad65CHUc95msj9KoH2gUu2gUtIIJfVrWm4JT5Y5hFVjix6FsHUmPNNJUqLRh6mlKDVP9pwa73YDP35LaKj1bUKBuxcQ1QyQJlQCUZ+ZkfJrof4kcBH+uuZHOr6haimoEFFUYoWN7ZrqTr1ga9gZ4tt6aVoxwHknxNM90hsRpNgcE7ysJf3+FZtloGozU1obfe2KfBDV5XKynofNwYi3wQ+jiB1otqe4e1y0hgBMVRjyF51TrdOvuKGlWiVTFHeMGo5pPEESfPhJCQWLEjMHIgvGILTo9GeLq5aYS1YNd6HipYovRPmk6ntDO5fPA52U+6D2xP4XH0e6qE9CY9Lw17GLZo32b8iRet8+t2ZevXpx2Mbu6Qof37hvMMYk+jsaGia+54iTnfsezfXV6cX93+sceryG/1QXpzq2O41KJP4P0LK3q5hTgLawhhvbjQh4VkGgzv3fP1PbL0PLnv/W9CRERERERERERERERERERERERERERERERERETED4D/AITX86kAKAAA"