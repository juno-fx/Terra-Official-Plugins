apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1W3W/bNhDPs/6KqzJgD6tke01qYAMGBG0eDARpsSR7WYeClpiIiERyJKVE/et3/LAsO0rrhxbFNv4C2BZ1n7873kUXikmjZ0ffEHPE8vTUfSP2v5/+Xix+np8cwem3DGqDVhuiAI6UEOZzcl96/y+FDvWn3KheCsZNrquv7MMW9fXJyXP1P1ksX+3V/9Xy9fwI5l85jkn8z+t//GK2Zny2JrpKEk0NZDShRSUgvUJeDON3sG0N8N2S53maJMdQVLS4B1MRgx8U3p5fXa8uz65X7y5Rp2NK8AZ1oSOKkXVNgWlADwm7hT8h+wTpDyONFP761VrhCYD3f4g5Low1mcP5I7OxYlyojr9hkdyybYzo0ka4ury6Pru4+Fx0LgZoZUkMdTq614Y2IWiOQQcj44CPYd2yutzIAhBpgo3wwDi2WV1D1sMdM4nTKUowwvkoqcboiWGCQ8kULYxQPco09/gEmdyjCt+g7pMz+VDiZ60hq0nwUAvus1BUCs2sWcsF8lMKqvmPxpKlkb/VcOhPXloPWHFhjwkvN4xg7ACeC4ygEM1t37IxFZvqvbGvblbbdIDUipKy9/Z1DjfWoq1Z7qrmcgoG3SPyBLJFzoRid4xDQ5BcZetbazr2hEnaNt143KY6WLamPBeVMVL/MpvhSdWuc/Q3cz4JF7xvRKtnwUxudbKspNJUsNgJbCdO22WWaoluifJky95UWMlRl9nqMDl0QduF+iAjoc1Q1LSk3mnNiUqhmmogU7cd5B3KbqrxwtXDHU1WwzqyJE24GVhqO7D6g+E9nv+YiHCvpqknBECLVhXUW3LzhRSGdf46oJsxF1nGRVYQvKeYFhbv7xY7xhrXuXk0ew2NHSCxFYGM+wq7MxBJwM6xMKX8YHpg6GN708hai7pFUUmwrsKNBWd58gqCrFvt9ELB99yqlo9yDGVvCOO57DGxGknBYTLP3Z+/tXk+DLjR6E3hN2vsY3CDK3iQQp0PO1d9FoQ+pKj1rNrBYU0ZcYxgccSDS160RrZGv4RGlNgUOBtwaYrmI8dHfLJMMI4SAzsMxwgSXpGOwoNilm6qGqY1sqstDxVagux3WC6XMJncLPhMD5P2gR0oPI7+QBWXXup5ach92Ay+zegjLVpjV8hg66fHCUZ352Jof99wlkHcPdjYqCJramiJd2ligb25OD+7vHl/wHq1mypI724qvFyi8wm8fWbtbOYqJW6wYljPLqkwPPxMerqSRpaeJve9//WJiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiPjP4R93qX8nACgAAA=="