apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+3S23KCMBAGYK55ilVvK6JCfYZety8QIEramDA5jPXtu4iOrdPDjU6n0/+bgTBkN1nY+NqpLvhZckM5W5XlYWSX4+F5XubLZVks+Ery+XxRrBIqb1nUSfRBOKLEWRu+i/tp/o/yx/5LE9y+s8qEzLdX3qNv8H1RfNn/olxd9L/IF0VC+ZXr+NQ/7/9kNKuUmVXCt2nqZaCpTGXdWho/8n8JymzofDRoOC1Zlo3TdEJPraR11JpqawJHebJrCvzyeKioUU7Wwbo97RSHVZKToulE/SIbCvYQW0fnOPddbGhF4Jvyx3U4yUXjSZmMHswwI1/FttPyjnZyWPuZ+0ha+T6z3+a8nLe0t5FqYchLOex5qleYhqvaKMMZVVS66b+Xox2JnfR2K6nTkadHqfY01SL97XYBAAAAAAAAAAAAAAAAAAAAAHzwBnHNc1kAKAAA"