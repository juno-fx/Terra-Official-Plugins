apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+2Y/W/aRhjH87P/iicuWrepNi8JicREJUTZNG1tI6pKk0IUHfYBXuw79+5MyxD/+56zDTiACYlIu5f7/hCc893zci/P50B6IoiVrJ48o2q1WuOy2dSfWpuf28/1eqN2cQLN5wxqqUQqIgBOBOdqX7+H3v9LJfP190JKWBK7cnJ8H3pR96x/4/z8fGP9z+qXuP6144eyrf/5+r84rQ4DVh0SObEsSRU41LI6/V/ed9/cvuu87X246nR7bSLG3PMtS9CIT+mtx9koGEckvr2js+9/gLkFqJB7JAQvumUkom27UrcLzdgRmxpZU/qHehMOdl9bDNhYd4CXlTl+LF7CSPAIuqmXtySGyjy3uiiMD0ZwCnfJkHoqhDFGvooK7MIAcJj+fzMlfPG66tNplSVhCI3X39V/AjWhLDW9Dm9XDOBzKoFxBfRLINUrkHdBHGMOruvaq/GCqkQwqKUNo+CIcTsc/pScxURN2vbc9YkibjZxByb1W3Gq7ycDAds5749NcpkfBulNHp3hYOXAcdQspmm+xVY0dD0f2Dwe2C0Y2Nm2HNiv8FlPS9Za1TNTzfIc2Isb21pYVr6sutrpXZfE0MG93X2zzlqmGW52zE6A40Xp213nAOxVHxuf/ShgLmVkGFL/kAGJpEK6hHE2i3gi10NLI/GdmAgSyQODKnRHd+htSoWrq5qesaeN9gOpg3RJ8lQLX9wRtlGXxyrgTJZmK4bEOyjPvCN6iHkYeDPXpyOShGpleWu5IUcf7tIoDqmiPsjE86iUIzxFs1Pb+tY1+jm14n86H4mgz3ADeIj/jbOzTf43G+eG/19Dj+P/C+hOqHenGXbV7/386x8QSNCjCPMziESxmln4+voanL90ec/6tRws6zc3BRxlp7HX77/vt5bGKJsGgrOIMgVTIgJdXCDCFYIh3XaTYQixpaBuIXysFDbruvCEi0nWNCVhovudbd1WrrQHXZZ23gs+B2oCGW/alXlqpXhhOTITIyrGdAOKyEQNPeQfPi3J19KPWTSIwUURg/mh1xntxeDHGM1uY3BjwvcREGwlEvrAkDIGLgeXRrOJwnIv+ym43rCLRxu5B8OH0z0Ih9g/DPlnJ70P/1g6AUU6lnksBSPYgoe0lS7XPkrme4XoyMpZaS13ORoNeaLwiqgLrAKfxiGfpUc7jyjLuXTH/6ex+4/Rkv+4LmIW84Cp418ANNQv1t/xt37/adYuNvl/2TT8/yoq8n+Jf43vHfTehrcQXOyHN14PBP2UBAIrxRCrgYY3utlCd+oS/XV/73XefbxKHbbzIrrDcz9h6beD5dU9JW8eK1Syh8yHW/hly6KhpAUrH3RhKrDvfonba7NwW9bxf+tVNDIyMjIyMjIyMjIyMjIyMjIy2q2/Ac3USUYAKAAA"