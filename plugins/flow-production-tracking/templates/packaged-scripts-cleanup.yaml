apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"