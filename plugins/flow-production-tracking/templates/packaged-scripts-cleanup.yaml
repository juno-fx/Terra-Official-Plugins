apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1ZCTiU69ufJlsTNa0kJ2+TUjljX0qNyFgmDDGiIo3xYjKbmTHI1kiyREySKMqaFDkRQqWSpLKUSrYia6FsCfG9hOP4Tuf8/991zvlf3/d1X5d5nnnu+/nd+/O+z2CRmGQGmyUH+xtJHiI1FZXJEaK543+fKygoyivDAJW/06hpcmGxiUwAgDHpdPYfyf0Z/38psabyT2SxwL+rDP79/CuqyKv+yP8/QXPyb0+hu8oyaA5/qY6JpKoqK38v/6qqakpz8q+soKYGA+T/Uiu+Q//P8x9ogtcTQYgjoKkITh9rCo0PJ/6EBKDPq5bpsdC6Lw6rRXA796F+AdsMjCv5NG50syrkKgUkX8yKp4DLLssfmY+BK7Y7zzu3ZLnEqs9HFwo/frzq9O7QBLn4gD02yOXhxfzIxFvxkUlHCDd+Ed21/8JItCq5SjnvMyYP3sbPGqfiaLyYUY2et+dE6b11Kcc9PejdPL7wk+1hFVefBdScOrD9ZerbvJ1m1MSctvm3dML0hXM6HmmH3EhIDm7ZS30qditNPdJ138DA5ULfSLEozss376TNcoJ9Md36OgusFcULMOs/uvhWLPd42r+rV/psmWtanviKEtqeDG5pIS3m7PAhQuPgdSkeSmJchKspo2/deffGS++zAxGbMq5gQ1a4rQ+Linq681Fd5vjKmNfNmPD7nPFcYa6mk87ZxMehce9O3DYhSOV5UArzBd9hsdiFOLL2A+Hhk5lp8bSeLTaoTaOtJRHKYqUHqf3vsjSbxbX93JysCKL1gb/8dGNDzP6SQUsgs7B5p97T2z33chfgZPqXFBWeXnNc80K2RL6WEVX7+LGXNUqr5cxX5LIo1Sdtj+npdQru2O6Nr7ufOM7zvb+G1z54FYCFS4XTsOXSjnRa8rbj5ipheK/D9094kFsP7Retnc+TWnpRxCQ8j+W4byRqUKva/1BOl0PqUn122+BbV7yxx42u9u6M137JoULztxcln1KvEeB8MPZIO5nnZJgj0CREen7CIy7wVv57+G7ktiA717aPsO3cjQoEMYbfw8/wvPcNuFRn1nBGzntKIbake/kRUYnqQGK3RHmL5lLBxe0xW0iv7j68P6jUZbfwXvfyoWVn4KsGht6V1qf0j+ySUti1c9Wb47RNYe8ytc0EjFZlWRo6qplLKbz6+gz+UeQqQuqm2fGKi8Z4q+dE/Tr4tsCLW2gLx9J1uFnk1asi5GkVX7+ukci2RIgK4tyWLZoXX6PJk1502+PNFZ9hTWFRwWY7ST7xYs34fM6J6NHb1xtoQUnSOrjn64SFsEHcRHRcYe1lUTOkAJ/i+Sr4JsvO7ppU2NCaYk0YjAu7hhSCzefC5L833HO4NXanUZ+n//mzUVLs7syG2CAD8S6jiNhTb7vIWSewy18rNdkcfVAiQq/u40M5HahHOWl5tTwJRgbskwoc86qwixbbcb9WyRmXnXRgG3fLgYrKItLOpfEPsjpx8PDCm86bti7gy7eECfPB72gCfzrcKQ4S302wwTnh7ZALYr+et8/ci7mpYXNUUzn+oaXO+PkB/g72kHSf1Afbed/16A8H10bHAMaAzyGevqmL51UtQFwhkYUyx4xnd3J/rrserVFakzp8OAvOdcSG4Y2p2uvMbYzlaR2F8xqO/ksqGG9DdJWVVaqORaNQWvXBQmk/u1wOzVARwq5jbu4lP28rD7vQW+zni9fzPX47seTMWmRIxQL4gmHAkxt6/K0F///AoX97kFyRvlJLz2CRp05c6wd2GaO69fBSvsL9D3wjtYHNS/i4g6JxnJGoN3tfFcMPAkiYAHze3zkMvUjJN8DyivSLdBNyHODiSddV81y2NwphUZsLTQ2/tLFKKaq7V3s+3jEklCGICsI6nGwzIX8Cv4zIffxJ7I1BwcoAqV0EgttZhOw56bRqX/k70u7rkQlF+tKLJDdcrwm4KjCkfFLAlnzNhNigszmPGSiFw4q96du+Ur+0ZekjjJcvNv+JWRof42wnN6rTKMKjV6qaYGEbPC86YR/Aw7I3ZRzpLY9bi+MhBR15CK6Q0YPRaLS7e161ecgK47XCFYpqAqjjmdkH9Z7GtHl//ep4H+Ms5/dAL4/uBpNjGADqVRYrvzI4L8bMG8ffhH6CeR4z4ApJRTmdjLwVU7i5+Sdt3Okir4nzIWdlgGbi9fcLM648ivYGSONaOeWIO3pZ6sjziWlX6syv9T90PSsjknTa3iW5ZfWH+POtoT4Rh9ntL+JLDHhY+7Rjl0OyCSbOZ/HWW/WSslt6FR0EZSROSta4ihntWtU2mLfNs692kbp3RxbJwJizO7GkRGOnl/rnQ5WsrnjsnpjTwiIDBII1avxnd5B/niv2l2KukDrXt8+xr7xjdVtk3G2rlO4sz6PNxR8/PkxVRim0RJa8iosxMshJv1DosJiHH+rrUpt/uEG3PPmJs3Py05blseHz137xJQcmLzJKcHatcylrXhFhk9yyKq7qdX0MfAOvlR7F/ICv1hcsv7J1C1jm1KEEX7/IFWckjq89sNcgxmY0wjZhm5uHumxgz/OjkZhBdaq7u8jA+xcWY/xNPa80JfaLPPvy+qS31TXO49Sre7c9HtDNb0tutRlzvyP2eminOn9HofdxbtmD/tW426PlL5ULyg/SjXVcgriWuwxvnxtzetGOCVbdbm1h3tVQmwV/fuGAa8Vw2x7TMHxPV2ruz1Ib/TQ8m9BBQtTmrtRLuz69rBlM2RELnaiO5eGjEuo8n6bhxlo//2fnA7UvGbe5FbfVPfNRxvDUQ150jeiOjRT/snN4MKy3I+HigvmpFhTXlDJZixVmnAaF4jb1yJznNfF9Weqs+R1sn9GnlGVLdb828TZS31gG0ZpH/ei2Z/jczzjRhkffl/epvW5s8Kgsl/78iH4nI4/j15a0qc+xMkt0eZzappY1w7bl9l90WsRIL0sL8ZJtYvSWc0lBXImbjIjWxHILz3s/b5TAsFpNzZck9QyP+ltr7l7aMZgrNUz+tGGrt0PyIoOEG+9tLz21aowfcAzxse9Z//LAifHb1PXUJ09NPM+NCpxJfF9eqeCTe8b1ernLJ/1T+IrKjnir4fKMMeNPCkXDQPGRr/Pgu7kF4JZsY2f32gAxd8kDCyXC7STGT3sZEiwTS1qbyULY9f4CLQlvQ49ksVcWVT3f2EPjR/HFR8K26CGFkAG7Rjsu4bGOuc/SYOmZwWMehx/7jK3wCpDCRSBrzZzzsks326xO4g+1TpN+8MTEqjsg4VpTkF7bOxwEuzi0wNh579mLvlc4jRqfOwPq7HMqvbSlq0ZL+5ZLum7sEVvxEmoOWqxfHyCL1NntvaSyWjudWETsPRayMFlDO8fV2NSzgVvX6NVNOWz6sqH/wb2F6ZLiocLBF8YwPDJjFFZcL5NQjM1I96jPkLPCArJR28Z2R6va8kbHB3xD1bHZKZwlCk806H30xpG64M0aN6QxPj11ezAOHS8Wvyt749Xl4CzN1wTXQ4buuJrZS3dqrzhGSmx5SQgp1aR755zTqC0symgG+Jr22kjW4YPVCpI61lkdO23h+Hrb9Ra11rE1gmuR5fL70f17WwUON9eC0aH31mIlDVv8Lx8JOIoMuNmJ3vCafVCmsLBLe3NGml35erfaT3fN+rtD2VXv2b3bG+MK73ckfbCudUkW1DWMH9jbeBiMjfXXtAo77/rBv+wJlbO6OupQ6mMTXFuQXEVN08LnFY6ROeK3JAStMf0FKh4pnioZGwMjopVPtJ6I6ejP7NuwXXf1IH1BQJkxMmChorFDPSMvX2lfXRLzfgFFTx2j2Gnz7l6hWn6Ch2LhYEVZlluzadziRvOxr8+K0DKXZZM+K+3ZJBunRlw50FVVm8DqFeCD47fe8JTxtkpys4gnlX3q96vpLTX18dfUDE9KDX/RXZOY69la/9ls113YEysLjgxSaONS/Qtyn720XUSe0lNEFiAu/rTwRWWne1l7ZuXiLy0v+LiwtCs3fMd6tW829X4Mk/9yrSfi4rL0Rt0Pxkiha3xaF05675OxYa0IQAopl0G1cnfAQF/4Tr6U85rEVQP266rFnM7LKu1HX864fbHySq63GUk77YHiPsMg0tZI58HzZcmCDe7nIg1t9L961A2mtOyJoTc2MtMI+RdaO9UMC1NeDMXePY/mFASaj0RL4XhRXiM7NBpSkqK39dXzTnmHxm1df2vHeleDxI8V8ltPFFTB1c/5WOWHC2Fb7532eqwnI9dQILQ/zN5txDAT8FGN9ECxS8qbAgb0ixZ8MQbuePzmWXlppf6WY6/gPZe2Dq2uhleerumd35xs+NHhMr9tutJPonxFPjtOLYX7HuIGrB/QCR+Ub5ErhVXAquEKKirhW/ObQC5fSOwBfpMvG/d8KZVxIAlrSablLYKppHpH5bhZNMQDVTamHhjYIRMM0oB6tHKIVflcHlG628Ma1t0avuyYCH92SUgtwt9/z7Mg2BdNjY/L1owIjz3w11V4dyVXKfNRroKvb1Bx+8MNWkjUB9/2UYPcedt1gF9OKxfQZaiX8twrG+fDYOPj1gnil8M+1AdPXNlwOnhs+s6Dvn/J/W/6/g/S2Ex3Bp1MY8uyHP8S5F/pT+7/8opKqnPu/0pqKso/7v//BK1bK2dLpsnZElmOCBbIBtAgAkG2B/YDaBqAktI21NHCm5ugAOttANsRpCEAgEkF0EyOPcTE6pgRcHgtAs4Yj4IYoBuZDcgj7MmzATxweDOClqGh12wIAJCVI9OguFMoIBMqN0jO3NQQNRcSQvpPR+f/Pk33/+x8/NU6/uT3XyV5eeW5/a+ipPKj//8J+r3+XweYM+yIbBBgEElORAeQBRBpdsBUhQCuDiAbQWSwAZdJocnpNA/tPskG3A6jXdhkCgugkG3dSLZoNzINZBKpRPnpBTKJRKIqz3yjQlpmeCxH6szcCXRnuVNZCtPfmSDNDmROgv8q704jzQi42ZPdQNYMj+TCZNGZ8gCTQVUkMch0YPIDYjqzVUl0JqgKQBM05D2ItgM5E66bQeZT6CQiBeAQmWSiLQVkIaYOMRsszhTzm0Nq8vdyNINJt3Mhscl0GprNhEJGpjmgEIZa5nhtfUh81mY5M0c628GFhkLgtI3xc3jTP72jEJACA4KxiY0uzlDnd4R+T5+sHchyYtMZKISpidHUxklAyHHUhFtYuiuNQifaTaYSN5Uu6DwGiAwGhUwiTqAhQJIjHUBNcSFUQMuFTZ9ABnQhLMBkRi9AmNILZZ5NB2abiEJQnezITADNAFC/XSfZzV2ZUjht27+kUVZWFoWYLDK0MYQ37S5q6iEy4auO20RY2JPuQfzpMp7SNsWdUPaHOmZKZrYSz28FhCbbUTlz8KD9JDqVQQHZoOykGUZ0DjhpA/hNArQD7MlQOQFQxCaWp5pmMvQAFDKQxKYz3adQoc0TFs5smBNiDkBnsKfLSW4zIDu1TXdSngpptpOdia82BSTSJtBcGN8AIecmnuL2EyDT01lezt4GbZnt1TcO1COT8WOATCqZxYLshyBJjlS6HYA2BVRUVOYm+ts2k1/FAeis+RYlLQYDIJOgCEArLowpSS27yWKYKuppo0kMAM0BUHJskMkkyn3nP1eo3+qWm/aV8+31YqaxZpzZj53SojPxCmyNwBOpIOZPyxChTadSoZfmf0FSxw0kYaS+nQcIHOQqRmqi/RGEiXDQiBQMm+kCIgjuDEjtrGbUhg5XBzqTDLIwlmgTOgU6jVgoQEPje35gZwULIDFB4kTBEdnAHGkIfS7Cf/oZ9IN+0A/6QT/oB/2gf5b+C8xf9c4AKAAA"