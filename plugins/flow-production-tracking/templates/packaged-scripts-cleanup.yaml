apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"