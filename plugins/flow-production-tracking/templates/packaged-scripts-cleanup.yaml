apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1ZCzxUW9ufJrcmarqSnNpNSuWM+6XUiIzLhCFGupDG2JjMzB4zY5BbI8klYpJEUa5JJSdCqFSSVC6lklsRolBuCfFtouP4Tuec9/t1zvv73rfn95u91l7Ps/7Pem5r77WHTWFRmRy2POJvJAWY1FVVx1uYprf/u6+oqKSgggBU/85FTZILm0NmAQCCBUGcP5L7M/7/U2JPxJ/MZoN/Vxr86/FXUlVQ+xH/f4Kmxd+eBrnKMRkO31XHWFDVVFS+FX81NXXlafFXUVRXRwAK33UV36D/8vgHmhL1xVCSKLgrRjDAm8HtvbGfiBB8vbjjUiw87kvAa5PcTr2rm8UxB+OKP4waX6sMuUgDqWcz42nggvMKB2bikEpvnGecmrdQasnHg7NFHzxYcnxbaIJ8fMB2G/TC8CJBdOL1+MikA6Srv4hv3X1mKFqNWqmS+xGXi2wVZI/SCQx+zLBm16tT4lB3bcphTw+oky8QfvRNWPnFxwHVx/Zsepb6KneLOT0xu3Xmdd0wA9Hstvs6IVcTkoObd9IfSVxP04h03dXXd77AN1Iiivvs5WsZ8+xgX1ynge4sayXJfNyq9y6+5Qs9HvVu7ZY5Weqaliu5qJixPZ1XUsCIOTm4j9TQf0Waj5EaFeNpyRpYt9+6+sz7ZF/E2vQL+JBFbqvCoqIebblfmzG6OOZFEy78Dnc0R5Sn5aR7MvFBaNzrIzdMSdK5HrSCPOHXeDx+NoGqc1d08GhGWjyja70NZu1wS3GEikTJXnrv60ytJkkdPzcnK5J4XeAvP11dHbO7uH8HkFHQtEX/0Y2u2zmzCLK98woLji87rHUmSypP25iuc/jQs2rlpfIWi3LYtKqjtof09duFN2/yJtbeSRzl+95Zxn/TfxFAhEuHM/BlMo4QI3njYQvVMKLX/jtHPKgt+3aL18zkS88/K2Yanst23DUU1a9d5b8vu8Mhdb4Bp7X/lSvRxONqx5vO9Bd+yaEiMzcVJh/TqBbivjPxSDua62SULdQoQnlyxCMu8HreW+Q29MYgO9fW94hNvDWKJAmm372PyNy39YRUZ/ZgevZbWgG+uHPhAXGpqkByp1RZs9Z84blvYtZTnt+6d6dfucNu9u3OhQMLTiCX9A28LqlL6R3aKq24dcuSl4cZa8NeZ+iYCxkvydxh5KhuIa34/PNj5Huxiyjpa+aHy8+aEK2ekA1qkRsDz65nzB65pMvLpC5dEqHAKP/8eZlU1g6UuDDBbcGcGfHVWnyZOTc8Xl7wGdQSFRduslsuIFmkFZ/HPRI9fONKPSMoSUaX8GSlqAg+iJeIjSuoOS9ujhYSUDpdiVy7o72zOhUxsKxIC4HgIS6jRRAzeQiFbzW3Ha6P3Gww4Bt8/GicFLstoz42yFCywzgi9tirDmrmEfzCF8qNNgfvFotBVT0CGKc9dRgnba/mh8HogF3SgSNe5XbREpvv1Cg7E7KS9mzkrd9TXlFI2TI//m5mOwEZXnDNee2GWQJ5OxCiAsibWsCfNjeLgiS3kWwITkQ79KzYz6ftM3birmnaHNRSib+3Q3f0dJ9gG2dApkf6ne2Mb1r0h41rg2MAs89nH9/AzMXzojYgqZjIxljgRrPaeT/XXonWLKlOHdyfieQ54sOIJnSdlRY2JgqMtoIZ9Qf/kgrmqxA9FRXVykPRGIx2XbBI2s8u50PTVUXwK1nruqlPWsvCznQX+fkS9X0P30gsPrECHVI+CzlrEPDkhR5+ZSn4fzDoX26WL7q0WFvfcI6nblzLO04ps6pl/3yBgt13fSN1gHXzBHj94nHcoaiXO58XIfcCaIQQcsbf2Qw8TckzxPMLDQr1ErIdkJJJV9RyXTY1iOAx6wrMjD61sktoatuWej7YPCCSLowJwjscbTWlfgA/Dcm//0nipWH+4gDprSSS20mU3CmZtCpfhZsy7qvQCYUGMnOWr75SHXBRaEDlqJAt9bIpuV53XS4rUJqAl3jZs2mxQUnz/Ps4L1983kPzNAHmyXZeVLtxhEe3dBXJ0jZ4RnTCLoCP56xNP9BdFreCwEcLO/JRPBHju8PRWHf33CqLkEUmK0TLldSFMIczsvbqP4pp9f782fEOzlne765+LuSGkGcaAhqVlos/M7lPRywaRl+GfkB4HjLkiUhHOR2NvB5TsK7pJx3C8UKvsf0he3GAVuKVt7PTL9yP9gYoo9rZZaib+pka6NOJaRdqLS733nM9KSuWdNzeJbl56bv40y2hPhH7OW+exhcb8vH2aYfOh2SRTJ1PEq036CdlNXcrOQjLSh1dXu0qYbx1SWt/7kbPnpo5Gt5tmRRDE+62xOJizS1eGh/3VbA74vHbY46LivWRSNaY0Z/dQcEZrvhfingiGjzfHseesralrZFxN6xSOjM9DzYVvX9/L1UFo9gcWfw8LsbYMPvSmQKHuXziQE+H+sz99XplyQ+dnZMfNS+MDZ+54pMvNTB5jnGCs2utS2nTogib5OYlcZUv6mKQq/ktUBTrHbHKQLjswob1YKlTmzJy1RxXgrEksWbPTsMYm+EI24SNbh4acoFdTw5G4vo16O7uYn1vn1qOCDZ2PdeS2i32+NOLo95Wl7kPUi/u3PigTy+vNbnFZsT9psSLgS0agm0F3od5pXd7lxJuDJc9U8kv2wuZ6LoE8XZsNbpxasTp6RtcsNoma0uLjvqaTOSTM3tcywdbt5uFEbs6UnN+ll7jp+nZiA0SoTd1pJ7b+uFZdX/K5lh4R3UsCx+W0uD7NA421Pj5Pz4dqHPOpNWtqLX2sY8Kjq8R8rRjSG9kqOiXLYP9Yd1tCWdnzUy1pLmmlMpZLjLn1isWtWpEZj+pju/J1GDPbOP4DD+iLZiv97mRv4b+ckcQo2nYD7I9IeB+wokxOPy2rEf9RUO9R0WZzMf70M30XK5fa9LaHseKTPGFceprm5cN2pbZf9JtlqA8KykgLm+VgJpPJQXxpK4xI1oSyyw9b/+8RgrHbjGzmJfUNTjsb621bX5bf470IPXD6g3eDslzDBOuvrU998iqIb7PMcTHvmvVsz1HRm/QV9EfPjL1PDUsdCLxbVmFok/OCdcrZS4fDI4Ryyva4q0Gy9JHTD4oFg4CRQc+z0Bu4+WD67NMnN1rAiTcl++ZLRVuJzV63MuItCOxuKWJKoJf5S/UnPAq9EAmZ3Fh5ZM1XQxBjEB8JGK9PloEHbB1uO0cEe+Y8zgNcSkjeMRj/wOfkUVeAdKECHSNuXNuVsk6m6VJgqHWaTJ3H5padQYkXG4M0m99TYBh54bmmzjvPHnW9wK3QfNje0CtfXaFl45M5XBJz8Llrmu6JBY9g4uDEevXA8ihdbd5z6uo0rlELiR3HwqZnaypk+1qYuZZz6tt8Oqk7Td7Vt979/bsS8slQ0WDz4zg+FTmMKKoTjahCJ9+yaMuXd4KD8hFbRzZFq1myx8e7fMN1cBnpXDnKT7UhHqghqHa4HWaV2VwPl2123EObU/nvi596dXh4Cwj0IjUR4duvpjRDTm9KT9ESWx+Rgop0YK8s09p1hQUpjcBAo07bZbXEoPV85PaVlodOm7p+GLjlWb1lpFlwivQZQq7sb07W4T2N9WA0aG3V+CXGzX7nz8QcBAdcK0du/oFZ69sQUGHzrr0NLuyVW41H26Z93aGcirfcro3NcQV3GlLemdd45IsrGcU37ezYT8YG+uvZRV22vWdf+lDOndpVdS+1AemhNYg+fLqxtlPyh0jsyWvSwlb43rzVT1SPFXT1wRGRKscaTkS09ab0bN6k97SfmhWQKkJOmC2kolDHTM3T3lXbRLrTj5NXwOn1G7z+naBel6Ch1JBf3lppluTWdzcBouRz48LsbLn5ZI+Km9fKxenTl7c11FZk8DuFhJAEjdc9ZT1tkpys4ynlH7o9avuLjHz8dfSCk9KDX/aWZ2Y49lS99F86y3EQytLrixaZM18gzPyH710XMQeQSlis1Bnf5r9tKLdvfRNRsXcT81PBXiItAtXfUe6da41dr8PU/h0uSvi7IJLDXrvTNAilwW0zxz13iVrw14UgBZRKYVz5VafoYHozTxp52WJS/rsV1ZJOJ2WU96NPZ9+42zFhRxvc4pO2l2lXUZBlA2Rzv2nS5OF691PRRrZGHz2qO1Pad4eAzU0sNJIeWda2tWNClKeDsTeOo3l5gdaDEVLE/hRXkObNetTkqI39tTxj3mHxm1YdX3zKlfDxPflChuO5FciNU75WOWFi+Bbbh/3eqAvK1+fL7I7zN5tyCgD8FGL9MBwissaA/oMCmd9MgFuevzmWXluscH6Q8+RXec2DCytQlYcr+6e2ZRs9N7hvKDtJeWfxAUKfTYfm4/03ccLWNWnG96v0CxfgihHVCEVVVXDN+Q1gjyBkNg9gqaf1mz/VCLrQBHVXp6WOwehmuodle1mWR8PVNqYeeAQ+0xxaEP6wYoBdsUTBVTJNg9rRGdL+IJDYoJZxSE1KH//7Y+DEJ+0NN8vWDYkOnLXX0/x9YUc5Yz7OYq+vkFFb+6t1kZj3vm+GTbMmbFJF/jluEo+JEs/l+te0TATgRgdtU6QPB/2ri547MhG0CXiL23Z6/tdzn+T53+QwWG5MyEqgyPHdvwuyL/Sn5z/FZSU1aad/5XVVVV+nP//CVq5Qt6WypC3JbMdUWyQA2BBFIpqD+wGsAwAI61jpKtNtDDFANYbAY4jyEABAIsOYFlce5iJ1zUnEYjaJIIJEQMzQDcqB1BA2VOnAngQiOYkbSMjr6kQACAnT2XAfqfRQBacbrCchZkRZjokjPTv9s5/Pk3W/9R4fG8df/L9V1lBRXF6/avCW8KP+v8H6PfqfyVgwbQjc0CASaY4kR1ANkBm2AETGQK4OoAcFJnJAVzGhca7kzys+zgbcNuPdeFQaWyARrV1o9hi3agMkEWmkxUmB6gUCoWu8vWODmv5ymM70r/2nUB3tjudrTh5zwIZdiBrHPxXeXcG5auAmz3VDWR/5VFcWGyIpQCwmHQlCpMKAeMXmOnMUaNALFANgDtYZzrZCRzvwX4AsXYg9zc3WA4E0dhjfjGHbaNBFDIN4JJZVLItDWSjJnY4GzzBDPebHWz8YzqWyYLsXCgcKsTAcliwP6kMBwzKSNuCqGMAi0+ZLG/uCHEcXBgYFEHHhDiNN/ldHoOCFRiSTExt9AhGur8j9Hv65OxAthMHYmJQZqbGExPHAWGvYMbMwkOuDBpEthuPM2EilvBmDZCZTBqVQh5DQ4EURwjATHBhVEDbhQONIQN6MBZg+lUvQJrQC6cFBwKmLhGDojvZUVkAlglgfjtOsZs+MqFwcm1/SaOcnBwGNZ6BWBMYb9JczMQTZsxWXbcxt3DGzYP5kzk+oW2CO6bsD3V8zaepSjy/ZBeWakfnTsOD51MgOpMGckC58WUYQ1xwfA3gFwnQDrCnwukEwB4bG56oqHHXA7DLQAoHYrlPoMKTx1b4dcI0F3MBiMmZTCf5dYDcxDS9cXk6rNlO7qt/dWggmTGG5sL8AggbN/aItx8DmexOsXLqNHjKVKu+cOAaGfcfE2TRqWw2vH4YkuJIh+wArBmgqqo6PdBfppn+Kg7AG9EXL2kzmQCVAnsAHnFhTkhq240nw0RSTy6awgSwXAAjzwFZLLL8N/7WwvxWt/ykrdwv7x5fC+urMbvxE1p0x96PrVFEMh3E/WkaonQgOh1+o/4LkrpuIAUn/WU/QBFgU3HSY+WPIo25g0Gm4TgsFxBFcmfCaqcUow688zpALCrIxu3AmkI0eDdiYwBNzW/ZgZ/iLIDCAsljCUfmANOkYfTpCP/uB9QP+kE/6Af9oB/0g747/Q/tQH92ACgAAA=="