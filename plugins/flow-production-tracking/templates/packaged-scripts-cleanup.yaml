apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"