apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"