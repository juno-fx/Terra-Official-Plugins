apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"