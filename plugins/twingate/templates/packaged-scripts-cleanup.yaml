apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"