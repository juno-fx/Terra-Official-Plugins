apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"