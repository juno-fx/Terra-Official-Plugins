apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"