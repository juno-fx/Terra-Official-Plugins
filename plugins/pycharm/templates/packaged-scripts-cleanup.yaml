apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"