apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"