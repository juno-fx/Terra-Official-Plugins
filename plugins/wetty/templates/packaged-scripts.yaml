apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1Z3W/bNhDPs/4K1n2dJDv+yKC3LRvWDl1j1Fn3MAwBLdESG4oU+OHYCPq/7yhRtuTMcbs5DrLqAlg0eXc8+ni/u1NULGmhVXj2hNQHurgYl0+g3WdjPBoOzmE8GJzDA42f0qiajNJYInQmhdCP8R1af6GknP/jDEv9RLeg9P/4a/x/PhxcdP4/BbX9f2k/gzXO2TH3sJ6djEZ7/T8c7Pp/dD6cnKH+MY3YR9+4/3FBPxKpqOARWg68hFQXovz+B5mjOVYkQZrInHLMPI5zEqE7ovXaW9Zy/QD+PBrbcaZ1oaIwlPguSKnOzNwoImFJE66DWOThJ8OFv1iF10RK7F8tFjSmmPlTZlLKVSjJQoUZwYkKc0x5WLj5cs+wvq5YKQIPJlIRFDz1vOf+HV8qteNfk7xgWJPj1gNfn/9HHf6fiPb5PyEFE+vcBu1/Tgcl/k/24v9geD7e8f/FENg7/D8BNfEfF4UKIQncUp5E6KfNDfByonGCNY48hKoMcH+Pgg+EEcgOwXuYQZ8/+1VWQIjhOWHK8iKr8jFmVZDYMkrYi8ZYRWgA3xTwxlrISkWOdZy9a+g8qBWh+h47DQ3zLbGWsi9QByY5Qy3ZZAaZCX61esZHzbxYq6U5TmGyV84K5VJYZDf6iJkhKig5bjROYbPeRq4QUjes87cbTmElQkMIlM1q7RCbdzeThC+b8hXHbPbmzdXsuiG5tFaAgQ2LlMpuMqF0y6CGhunVhy/QYE/Q0nB/7yO62PDYouKmwDoDpge7/PjD7OfHt2iKt/cgPLEqnzuoXhDtw3/KU0mUOkovcAj/B/3JDv5PJuNhh/+noCb+c6LvhAT0T4Pb7wGdxDYZvK2uw55M4OKSO9h0dwdYMOdCY9tNOEC7NXMiYR9Sqq8vWcygnof9odBflWzlKKiX20LY6Mw3kgEmWNCDXgOajDkjwS6CqwLH1p5ALWPYAhxNZMBEjFlkITSEo1fK7KFVZWb48Dhhb5umDCPuID6yMNk6vsNNB0ilbVtMB7RqYLqVt1NwhrAQDEuq/nln1CArcL0u4DefQpNEV63FOY5vAf2i1qRNpXJJY7I7vd95Dxgtlj8UBwUmB6+4bPTct7ijf0v78N9dnFPgf380GD7A/9Ggw/9T0M77nwrtZ5Xzn77u1yWcXVbY/HbqNYpfv0KebbULbkqJ3imBCym0iAUkg+vLqbcFNlcOtzuJA0Y9tyuehdrxv6xywZFfAB96/zsa7fb/o3F/3MX/KajZuNo3tZEHvbiIPGhK7TClSst15KVSGChn4sJAyTLoATLkAuZh/Avt2el3NKcQmNww5habM6mVW2CmiEeTVYT6XmpoYp+Fe5bVFHxjbEZiSWCsoPSzsOQtBTM5+U0YDsiA/vzLTVRj1+rWzeOvv7+/8ppto5aGQAG3wQH3OrmUvbk1tLBH9gBGVusbXheNEXKlp1+VpM/tpCekOv4JBz8XgnIdqOzIexzM/+OLnfgf2tfFXfyfgF6/CueUh3OsMg/CRCOfeCTOBOrN4HfREAdoezVQdVuCIOh53mt0nRG0gIhF7t87CokF0jDpLhVKqCzDbo3uKLDNCQgZXthWJUFalLyxkRJkG7w6wxo+qHJ6QEgariAmA+hDqxWywlCpku8AuSrdn8CPiAFaWaUgsVWnBFoLg2LMoRwg1Z61vZgnYBXEOEjMDWWJPS9wS4TviBJQHVR48cpjCvkM/5+RoKOOOuqoo2+J/gYiKL5eACgAAA=="