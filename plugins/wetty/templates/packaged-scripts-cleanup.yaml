apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"