apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"