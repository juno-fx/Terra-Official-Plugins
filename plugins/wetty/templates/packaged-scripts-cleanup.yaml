apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"