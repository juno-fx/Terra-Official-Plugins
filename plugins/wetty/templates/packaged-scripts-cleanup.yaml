apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"