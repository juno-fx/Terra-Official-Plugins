apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"