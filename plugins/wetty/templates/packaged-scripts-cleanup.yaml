apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"