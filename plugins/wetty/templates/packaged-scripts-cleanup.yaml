apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"