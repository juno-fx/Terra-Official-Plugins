apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"