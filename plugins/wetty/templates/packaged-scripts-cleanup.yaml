apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"