apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "H4sIAAAAAAAAA+1bbW/bthbuZ/0KTiuwu+FKimM7GTQUF0PbdRnWxmjSrcMwGLRE21xkUiMpJ0ba/34PScmWZMlu2tRdUZ0EscSXw9fz8DmHjowETZUMHnxEOQI5PR2aT5D6Z+l50O8dw3OvdwwfaPgxO1VIJhUWCD0QnKtd5fblf6Yi8/WP5lioj7QLzPoP77L+x/3eabf+h5Dq+j/Wf/0VXiT32YZe2ZPBoHX9+736+g+O+ycP0NF9dqJNvvD1xyn9jQhJOQvRsufExG4I8/47maAJliRGiogFZThxGF6QEF0TpVbOsqh35MOPQyP9PFcqlWEQCHztz6iaZ5NMEgFZijDlR3wR/J0x7k1vgksiBPbOp1MaUZx4oySbUSYDQaYymBMcy2CBKQvSPN20GRTbFUtJ4CPhM+6nbOY4n3oeP1ep2r8iizTBitwvH7j7+T/o8P9A0rb+4zlJUjBwX6UffBYY/D9px/+TQb+2/if6uOjw/wByext8hy7nVCL45SxZIUZIDJCfMUUT1PNf+3/oLJkxQFykOEoFX9KYIMDyFCs6oQlVK/Rd8Patc3vroZhMKSPI1TDvQ9mb1Qs4M2SKI+IiDwohpIs9rGah8BHyf8NJRqStNGbrrDdaJ84ShVwXrRXQKWJcbekx+esShcqx7s14Bjv7Gq/GcOYV5Zo78wi5SmAYyJVbVkgSSfZWpGwmiJQeg1PrplqdxZvuV14aBlEq81HXv83+82HcCxfcY/9g8idb9j/s7P8gUjKl/5B/dhiMEhn5Vm/HMmNkRF1zcQWbxb/6XvqUB8Ah4TUO0ZndQM6CKBxjhUPY65Y93t6um9EJoNOzhBIhzKAjWLNPGRq7ucomREArxCgvNmWUAP+D1rWJmWLmyS+yq5VwpuZeJpIQuZqcAjcFUjpJiK/78ZIkBBiuX7Y9Xy4jaAI2BhF+wiOchH3YmwEM3CrTQ5a2m8H2YALXkSmJdP9FlpB8IB6ac6kqg9cJGzgxfcufEQJkncvNq66vk2AMQcoTLKhsaNktlbcqLlcpTPgIODW9qWROcHQF8BJWEhECqr6kEaknv8PKVSXlQm0rATXZApYmRDCfvYNBXCc7pA3/c8v2YLfRaPVhx8A+/jcc9Kr4f3zUO+11+H8IeUc0f2GzRmY33AXTCyhMeXwBWBspLiwwLLCK5r/iCZCqAilMZIDCEbC0R4AJF5TAFtCvGfRy4C+Qdir4YoM+HlpTyWoPCmnoSSHVk6QYtr8eM2VwTsRtbNf/DKCt1f7NiXo/kcB9/K8/3OJ//X6/s/9DSC3+Z639MWdTOnuO0wZLbzDB3Ndx1gXN3olASYjeGIsiS8KURLeW7Giqg26dDeUgYv2KUEKBeDFDEX6oJ/4Zhn+FtRwgaBoc0A5iVNKOkHUvU2CQKOeDhuMZemZ4Xruet4GU83K6jm1C+v+0tkf6D6BV/MNWY7qdcR4uBZe6t10CfOuxDnqCulfpTMADemhqZfZtZw1YLga4ppW7eXl3u4KAwmNFF4RnCg36x8bgdup97b0kOPHORuihIAuuyBjHsdhT5ScurrGISayfcs9W1xvfjKdFln7aqeZnTY3tBOh12dPkC9hvr72RzjBuyqZ4Qa7t578ejD+BtOF/7gkcwv8/6g8H2/G/YYf/h5BG/L+wi/8+PE9WKNZ7MzrtQK75nPEmrc9ozRlWbEbUqJ4M0KB4xMHTv3w8ytNst22k4FPP9b9R2uzfrKqnOBB+cAc+DAX2xv/r8T84m/rHnf0fQt6P/5XDZhoD8n2yoYByBXxt4ct5wQC//iqYUBbIuWNJn0IeccxzFKMgkyKQIgpwmtpEIAwzwbMUebMKRMwyqgNGrr2C1vRLrisYMuY9QV5WqZIWVbxnpVqVIjmNc60qEs15U3ZYEDwXvUHR3LzFtsoKC4b0RoJhefrKfHecDgrhJOHXHp0KSPqUt9et9r8B6Q/mAHvsf9gf1M//0+Fpd/4fRMr2D9YnNyGfC1h9Ms2SC6LezQ10mwL4X+t7wgUGi0+xAIWxceUQnyJrhmqOFYowQziKiNTvVKLS5kNYIu25mLtJv51USNi/BHrtMs6I217uKqMpEZ7WXhvF2Gat4+it3CXhWDf0Y5om1Pqerh7nAosr233oMkZFSZiSGFH1DQxtlRIEng8UIjpGpb8SE6NXZ9BaUoo+NbYLSwNN5pCyp3/7uFVLVb0eYTMsts86LNlWU3miBdT1VQgxsyVD1HO2aOL9xQKhdoFhuerSztWS1OJ87bOdT/buknsm7cNGAtOUz54W7QjvtD1zmMKuwpSBZdUDoOXrMit0gWdam0kPDewrt54/ypLERn1DdDZ9wdVIEEmYKnvkG66+aXLdkS2WXkhzp5Y8yRbkOc/Yts7mGmaVdfmRuSALiIps9DLYxKHq11zZxBZuKFE0U7/Y2pqNH5NrvJJg+JfnT86RvKawh/X3I8qzZMxdz6ywyAC/BgBgpoEuNaxFaWUFmQFSipW+Uqwkp1yTkVKSwrPa7Z/B3Pr1nofKFMwKOFJb0xysydvdF/mocZGXlFwTUcoibNm8uL+8enE+Hr08/+Xp48uaqqUe7E+V0H4hU0qS+CWZNl05mjy72pX4vYnRN/bh1cXTl01t77Hzsoqfz58/bVERzPmCNMQQmxWNXp092d+XguI2q3j2LipmTSr0Da3AbEbWxWDhNlfW1Xa0MoNGb9A/GVekXm7drC5oHttKVr4fs668FxhyJ2QHNDRtbC1rPGgroBnIORCQ0MQXtzpb+qZRuZtN41L8D2DTzcXfIAbMS8NG73jvnNiaDTC/PQ1R4c5V5609nr925+q669h7Z835TcEdJ6914spz9n29Rj5d3XeDd0nV/1vayb3nfwAw/t+O7/8PjoY1/28wPOru/w8iZbJjyKyjCUboAKfQj5aChI4JxoROlGZg1z0XHMIFh3R4fkZdnfwrXVCgAAwIUp5ZTpnpelOcSOLQ+CZER44+b/Rnmn+a6zd4S8DfjASB58K3cCrIj/78yymgTz/nTKLMHwwIFEecxmvX2bgb+b8TmLq5xxd+yQBR2D8gqFilnDIFp989t7Ev/jsYntbsv3/axX8OI3lcdoKB8zh5WNYGQC90OBNYANpsDWR3i+/74J+C46PjGGCxKP/3HqnDOjq4kW8qFFNhzG6FrikUmxColLFUf/cw1q6SLhtlQujje1PWhISMu2T1QCWRMXCemI/OmM0hNxi8fPJfQC6r+29YRxtaAqVQY6NOcrTimYkxSUJsm0V/dWxmAiDHoMYko0msxwulBcLXRAJRRxYvvnISibwEf8lI0UknnXTSSSeddNJJJ5100kknnXTSSSedfG7yf0csRowAUAAA"