apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-scripts-configmap-cleanup
  annotations:
    argocd.argoproj.io/hook: PostDelete
data:
  bootstrap.sh: |
    #!/bin/bash
    echo "Unpacking scripts..."
    # decode base64 encoded scripts mount at /terra/scripts.base64
    base64 -d /terra/scripts.base64 > /terra/scripts.tar.gz
    
    # extract scripts to /terra/scripts
    tar -xzvf /terra/scripts.tar.gz -C /terra/
    
    # make scripts executable
    chmod +x -v /terra/scripts/*.sh
    
    # start entrypoint.sh
    cd /terra/scripts
    pwd
    ./entrypoint.sh
  packaged_scripts.base64: "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"